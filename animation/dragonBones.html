<!DOCTYPE html>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<link href="../css/site.css?1505580292" rel="stylesheet" />
<link href="../css/rouge.css?1505580292" rel="stylesheet" /><title>animation/dragonBones &ndash; Phaser Examples</title><div id="phaser-example"></div>
<div class="controls">
  <button id="fullscreen">Full Screen</button> <button id="restart">Restart</button> <label for="scaleMode">scale:</label> <select id="scaleMode">
    <option value="0">
      Exact Fit
    </option>
    <option value="1">
      No Scale
    </option>
    <option selected value="2">
      Show All
    </option>
    <option value="3">
      Resize
    </option>
    <option value="4">
      User Scale
    </option>
  </select> <label for="userScale">user scale:</label><select id="userScale">
    <option>
      0.1
    </option>
    <option>
      0.25
    </option>
    <option>
      0.5
    </option>
    <option>
      0.75
    </option>
    <option selected>
      1
    </option>
    <option>
      2
    </option>
  </select> <label for="rendering">rendering:</label> <select id="rendering">
    <option>
      auto
    </option>
    <option>
      crisp-edges
    </option>
    <option>
      pixelated
    </option>
  </select> <label title="Enlarge the game container (on larger displays)"><input id="bigger" type="checkbox">Bigger</label>
</div>
<h1>
  animation/dragonBones
</h1>
<div class="sourcelinks">
  <a href="../js/bower_components/phaser-examples/examples/animation/dragonBones.js?1505580292" title="animation/dragonBones.js">source</a> â€¢ <a href="../js/bower_components/phaser-examples/examples/animation/dragonBones.js?1505580292" download="" title="Download: animation/dragonBones.js" type="application/javascript">download</a>
</div><pre class="highlight javascript"><code>
<span class="kd">var</span> <span class="nx">__extends</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__extends</span> <span class="o">||</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">p</span><span class="p">))</span> <span class="nx">d</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="nx">p</span><span class="p">];</span>
    <span class="kd">function</span> <span class="nx">__</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span> <span class="p">}</span>
    <span class="nx">__</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">__</span><span class="p">();</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">dragonBones</span><span class="p">;</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">dragonBones</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">geom</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">Point</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">x</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">y</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">Point</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="s2">"[Point (x="</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s2">" y="</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="s2">")]"</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">Point</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">geom</span><span class="p">.</span><span class="nx">Point</span> <span class="o">=</span> <span class="nx">Point</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">Rectangle</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">Rectangle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">x</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">y</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">width</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">height</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">Rectangle</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">geom</span><span class="p">.</span><span class="nx">Rectangle</span> <span class="o">=</span> <span class="nx">Rectangle</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">Matrix</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">Matrix</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">Matrix</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">a1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">b1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">c</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">d1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">d</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">tx1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">a1</span> <span class="o">*</span> <span class="nx">d1</span> <span class="o">-</span> <span class="nx">b1</span> <span class="o">*</span> <span class="nx">c1</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">d1</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="o">-</span><span class="nx">b1</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="o">-</span><span class="nx">c1</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">a1</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="p">(</span><span class="nx">c1</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">ty</span> <span class="o">-</span> <span class="nx">d1</span> <span class="o">*</span> <span class="nx">tx1</span><span class="p">)</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">a1</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">ty</span> <span class="o">-</span> <span class="nx">b1</span> <span class="o">*</span> <span class="nx">tx1</span><span class="p">)</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">Matrix</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">geom</span><span class="p">.</span><span class="nx">Matrix</span> <span class="o">=</span> <span class="nx">Matrix</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">ColorTransform</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">ColorTransform</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">alphaOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">blueOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">greenOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">redOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">ColorTransform</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">geom</span><span class="p">.</span><span class="nx">ColorTransform</span> <span class="o">=</span> <span class="nx">ColorTransform</span><span class="p">;</span>
    <span class="p">})(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">geom</span> <span class="o">||</span> <span class="p">(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">geom</span> <span class="o">=</span> <span class="p">{}));</span>
    <span class="kd">var</span> <span class="nx">geom</span> <span class="o">=</span> <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">geom</span><span class="p">;</span>

    <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">events</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">Event</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">Event</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">Event</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">events</span><span class="p">.</span><span class="nx">Event</span> <span class="o">=</span> <span class="nx">Event</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">AnimationEvent</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">__extends</span><span class="p">(</span><span class="nx">AnimationEvent</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
            <span class="kd">function</span> <span class="nx">AnimationEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">type</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_IN</span> <span class="o">=</span> <span class="s2">"fadeIn"</span><span class="p">;</span>
            <span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_OUT</span> <span class="o">=</span> <span class="s2">"fadeOut"</span><span class="p">;</span>
            <span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">START</span> <span class="o">=</span> <span class="s2">"start"</span><span class="p">;</span>
            <span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">COMPLETE</span> <span class="o">=</span> <span class="s2">"complete"</span><span class="p">;</span>
            <span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">LOOP_COMPLETE</span> <span class="o">=</span> <span class="s2">"loopComplete"</span><span class="p">;</span>
            <span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_IN_COMPLETE</span> <span class="o">=</span> <span class="s2">"fadeInComplete"</span><span class="p">;</span>
            <span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_OUT_COMPLETE</span> <span class="o">=</span> <span class="s2">"fadeOutComplete"</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">AnimationEvent</span><span class="p">;</span>
        <span class="p">})(</span><span class="nx">Event</span><span class="p">);</span>
        <span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span> <span class="o">=</span> <span class="nx">AnimationEvent</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">ArmatureEvent</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">__extends</span><span class="p">(</span><span class="nx">ArmatureEvent</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
            <span class="kd">function</span> <span class="nx">ArmatureEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">type</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">ArmatureEvent</span><span class="p">.</span><span class="nx">Z_ORDER_UPDATED</span> <span class="o">=</span> <span class="s2">"zOrderUpdated"</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">ArmatureEvent</span><span class="p">;</span>
        <span class="p">})(</span><span class="nx">Event</span><span class="p">);</span>
        <span class="nx">events</span><span class="p">.</span><span class="nx">ArmatureEvent</span> <span class="o">=</span> <span class="nx">ArmatureEvent</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">FrameEvent</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">__extends</span><span class="p">(</span><span class="nx">FrameEvent</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
            <span class="kd">function</span> <span class="nx">FrameEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">type</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">FrameEvent</span><span class="p">.</span><span class="nx">ANIMATION_FRAME_EVENT</span> <span class="o">=</span> <span class="s2">"animationFrameEvent"</span><span class="p">;</span>
            <span class="nx">FrameEvent</span><span class="p">.</span><span class="nx">BONE_FRAME_EVENT</span> <span class="o">=</span> <span class="s2">"boneFrameEvent"</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">FrameEvent</span><span class="p">;</span>
        <span class="p">})(</span><span class="nx">Event</span><span class="p">);</span>
        <span class="nx">events</span><span class="p">.</span><span class="nx">FrameEvent</span> <span class="o">=</span> <span class="nx">FrameEvent</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">SoundEvent</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">__extends</span><span class="p">(</span><span class="nx">SoundEvent</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
            <span class="kd">function</span> <span class="nx">SoundEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">type</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">SoundEvent</span><span class="p">.</span><span class="nx">SOUND</span> <span class="o">=</span> <span class="s2">"sound"</span><span class="p">;</span>
            <span class="nx">SoundEvent</span><span class="p">.</span><span class="nx">BONE_FRAME_EVENT</span> <span class="o">=</span> <span class="s2">"boneFrameEvent"</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">SoundEvent</span><span class="p">;</span>
        <span class="p">})(</span><span class="nx">Event</span><span class="p">);</span>
        <span class="nx">events</span><span class="p">.</span><span class="nx">SoundEvent</span> <span class="o">=</span> <span class="nx">SoundEvent</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">EventDispatcher</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">EventDispatcher</span><span class="p">()</span> <span class="p">{</span>
            <span class="p">}</span>
            <span class="nx">EventDispatcher</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasEventListener</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span><span class="p">[</span><span class="nx">type</span><span class="p">])</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">EventDispatcher</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span> <span class="o">=</span> <span class="p">{};</span>
                    <span class="p">}</span>
                    <span class="kd">var</span> <span class="nx">listeners</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span><span class="p">[</span><span class="nx">type</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">listeners</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">listeners</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">listeners</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">listener</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">listener</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">EventDispatcher</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span> <span class="o">||</span> <span class="o">!</span><span class="nx">type</span> <span class="o">||</span> <span class="o">!</span><span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="kd">var</span> <span class="nx">listeners</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span><span class="p">[</span><span class="nx">type</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">listeners</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">listeners</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">listeners</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                                <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span><span class="p">[</span><span class="nx">type</span><span class="p">];</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="nx">listeners</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">EventDispatcher</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeAllEventListeners</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span><span class="p">[</span><span class="nx">type</span><span class="p">];</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">EventDispatcher</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispatchEvent</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">listeners</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_listenersMap</span><span class="p">[</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">listeners</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">listenersCopy</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">.</span><span class="nx">concat</span><span class="p">();</span>
                        <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">listenersCopy</span><span class="p">[</span><span class="nx">i</span><span class="p">](</span><span class="nx">event</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">EventDispatcher</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">events</span><span class="p">.</span><span class="nx">EventDispatcher</span> <span class="o">=</span> <span class="nx">EventDispatcher</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">SoundEventManager</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">__extends</span><span class="p">(</span><span class="nx">SoundEventManager</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
            <span class="kd">function</span> <span class="nx">SoundEventManager</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">SoundEventManager</span><span class="p">.</span><span class="nx">_instance</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Singleton already constructed!"</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">SoundEventManager</span><span class="p">.</span><span class="nx">getInstance</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">SoundEventManager</span><span class="p">.</span><span class="nx">_instance</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">SoundEventManager</span><span class="p">.</span><span class="nx">_instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SoundEventManager</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">SoundEventManager</span><span class="p">.</span><span class="nx">_instance</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">SoundEventManager</span><span class="p">;</span>
        <span class="p">})(</span><span class="nx">EventDispatcher</span><span class="p">);</span>
        <span class="nx">events</span><span class="p">.</span><span class="nx">SoundEventManager</span> <span class="o">=</span> <span class="nx">SoundEventManager</span><span class="p">;</span>
    <span class="p">})(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">events</span> <span class="o">||</span> <span class="p">(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="p">{}));</span>
    <span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>

    <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">animation</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">WorldClock</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">WorldClock</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">timeScale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">time</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.001</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="p">}</span>
            <span class="nx">WorldClock</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animatable</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">animatable</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">WorldClock</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animatable</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">animatable</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">animatable</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">animatable</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">WorldClock</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">remove</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animatable</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">animatable</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">WorldClock</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">WorldClock</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">advanceTime</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">passedTime</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">passedTime</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">currentTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.001</span><span class="p">;</span>
                    <span class="nx">passedTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">time</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">time</span> <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nx">passedTime</span> <span class="o">*=</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeScale</span><span class="p">;</span>

                <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="kd">var</span> <span class="nx">currentIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">animatable</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">animatable</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">currentIndex</span> <span class="o">!=</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">[</span><span class="nx">currentIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">animatable</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                        <span class="p">}</span>
                        <span class="nx">animatable</span><span class="p">.</span><span class="nx">advanceTime</span><span class="p">(</span><span class="nx">passedTime</span><span class="p">);</span>
                        <span class="nx">currentIndex</span><span class="o">++</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">currentIndex</span> <span class="o">!=</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                    <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">[</span><span class="nx">currentIndex</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">];</span>
                    <span class="p">}</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_animatableList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">currentIndex</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="nx">WorldClock</span><span class="p">.</span><span class="nx">clock</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WorldClock</span><span class="p">();</span>
            <span class="k">return</span> <span class="nx">WorldClock</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">animation</span><span class="p">.</span><span class="nx">WorldClock</span> <span class="o">=</span> <span class="nx">WorldClock</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">TimelineState</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">TimelineState</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">DBTransform</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">DBTransform</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">ColorTransform</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_borrowObject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="k">new</span> <span class="nx">TimelineState</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
            <span class="p">};</span>

            <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_returnObject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timeline</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">timeline</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">[</span><span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">timeline</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nx">timeline</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
            <span class="p">};</span>

            <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_clear</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">clear</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">getEaseValue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">easing</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">easing</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">valueEase</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">value</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">))</span> <span class="o">-</span> <span class="nx">value</span><span class="p">;</span>
                    <span class="nx">easing</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">easing</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">valueEase</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">value</span> <span class="o">*</span> <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">HALF_PI</span><span class="p">)</span> <span class="o">-</span> <span class="nx">value</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">easing</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">valueEase</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">value</span> <span class="o">*</span> <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">HALF_PI</span><span class="p">)</span> <span class="o">-</span> <span class="nx">value</span><span class="p">;</span>
                    <span class="nx">easing</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">valueEase</span> <span class="o">*</span> <span class="nx">easing</span> <span class="o">+</span> <span class="nx">value</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fadeIn</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">bone</span><span class="p">,</span> <span class="nx">animationState</span><span class="p">,</span> <span class="nx">timeline</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span> <span class="o">=</span> <span class="nx">animationState</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span> <span class="o">=</span> <span class="nx">timeline</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">originTransform</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_originPivot</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">originPivot</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_tweenTransform</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_tweenColor</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_totalTime</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">.</span><span class="nx">totalTime</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

                <span class="k">switch</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">().</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">case</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_arriveAtFrame</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_updateState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_updateState</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="nl">default</span><span class="p">:</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_updateState</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fadeOut</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">);</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">);</span>
            <span class="p">};</span>

            <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">progress</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_updateState</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_updateState</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">scale</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">progress</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">progress</span> <span class="o">/=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
                        <span class="p">}</span>

                        <span class="k">if</span> <span class="p">(</span><span class="nx">progress</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">progress</span> <span class="o">=</span> <span class="mf">0.99999999</span><span class="p">;</span>
                        <span class="p">}</span>

                        <span class="nx">progress</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">offset</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">loopCount</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">progress</span><span class="p">);</span>
                        <span class="nx">progress</span> <span class="o">-=</span> <span class="nx">loopCount</span><span class="p">;</span>

                        <span class="kd">var</span> <span class="nx">playedTime</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_totalTime</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">isArrivedFrame</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">frameIndex</span><span class="p">;</span>
                        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span> <span class="o">||</span> <span class="nx">playedTime</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFramePosition</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrameDuration</span> <span class="o">||</span> <span class="nx">playedTime</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFramePosition</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">isArrivedFrame</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_arriveAtFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                            <span class="p">}</span>
                            <span class="nx">isArrivedFrame</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">frameIndex</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">frameIndex</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">().</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">frameIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                                <span class="p">}</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">()[</span><span class="nx">frameIndex</span><span class="p">];</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="nx">frameIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">()[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="p">}</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrameDuration</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_currentFramePosition</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">position</span><span class="p">;</span>
                        <span class="p">}</span>

                        <span class="k">if</span> <span class="p">(</span><span class="nx">isArrivedFrame</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">tweenActive</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">displayIndex</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
                            <span class="nx">frameIndex</span><span class="o">++</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">frameIndex</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">().</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">frameIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="kd">var</span> <span class="nx">nextFrame</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">()[</span><span class="nx">frameIndex</span><span class="p">];</span>

                            <span class="k">if</span> <span class="p">(</span><span class="nx">frameIndex</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">.</span><span class="nx">loop</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">.</span><span class="nx">loopCount</span> <span class="o">&gt;=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">.</span><span class="nx">loop</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFramePosition</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrameDuration</span><span class="p">)</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">_totalTime</span> <span class="o">+</span> <span class="nx">loopCount</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">offset</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">scale</span> <span class="o">&gt;</span> <span class="mf">0.99999999</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_updateState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_tweenEasing</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">displayIndex</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">displayIndex</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">.</span><span class="nx">tweenEnabled</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_tweenEasing</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">.</span><span class="nx">clip</span><span class="p">.</span><span class="nx">tweenEasing</span><span class="p">))</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_tweenEasing</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">tweenEasing</span><span class="p">;</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_tweenEasing</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">.</span><span class="nx">clip</span><span class="p">.</span><span class="nx">tweenEasing</span><span class="p">;</span>
                            <span class="p">}</span>

                            <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_tweenEasing</span><span class="p">))</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_tweenTransform</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_tweenColor</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>

                                <span class="k">if</span> <span class="p">(</span><span class="nx">frameIndex</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">);</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">);</span>
                                <span class="p">}</span>

                                <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

                                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">x</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">y</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_tweenTransform</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_tweenTransform</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                                <span class="p">}</span>

                                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span> <span class="o">&amp;&amp;</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaOffset</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaOffset</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaOffset</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redOffset</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redOffset</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redOffset</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenOffset</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenOffset</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenOffset</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueOffset</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueOffset</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueOffset</span><span class="p">;</span>

                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaMultiplier</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redMultiplier</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenMultiplier</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueMultiplier</span><span class="p">;</span>

                                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaOffset</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redOffset</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenOffset</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueOffset</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="k">this</span><span class="p">.</span><span class="nx">_tweenColor</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                        <span class="k">this</span><span class="p">.</span><span class="nx">_tweenColor</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                                    <span class="p">}</span>
                                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_tweenColor</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaOffset</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaOffset</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redOffset</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redOffset</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenOffset</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenOffset</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueOffset</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueOffset</span><span class="p">;</span>

                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaMultiplier</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redMultiplier</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenMultiplier</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueMultiplier</span><span class="p">;</span>
                                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_tweenColor</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaOffset</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaOffset</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redOffset</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redOffset</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenOffset</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenOffset</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueOffset</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueOffset</span><span class="p">;</span>

                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">=</span> <span class="nx">nextFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_tweenColor</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                                <span class="p">}</span>
                            <span class="p">}</span>

                            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_tweenTransform</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">.</span><span class="nx">blend</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>

                                    <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originPivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originPivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>

                                    <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                                <span class="p">}</span>
                            <span class="p">}</span>

                            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_tweenColor</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_updateColor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaOffset</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redOffset</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenOffset</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueOffset</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaMultiplier</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redMultiplier</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenMultiplier</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueMultiplier</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_isColorChanged</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_updateColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_arriveAtFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                        <span class="p">}</span>

                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_tweenTransform</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_tweenColor</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">progress</span> <span class="o">=</span> <span class="p">(</span><span class="nx">playedTime</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFramePosition</span><span class="p">)</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrameDuration</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_tweenEasing</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">progress</span> <span class="o">=</span> <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">getEaseValue</span><span class="p">(</span><span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_tweenEasing</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>

                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_tweenTransform</span><span class="p">)</span> <span class="p">{</span>
                            <span class="kd">var</span> <span class="nx">currentTransform</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">;</span>
                            <span class="kd">var</span> <span class="nx">currentPivot</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">.</span><span class="nx">blend</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">+</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">+</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>

                                <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originPivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">currentPivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originPivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">currentPivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="nx">currentTransform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationTransform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>

                                <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">currentPivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">currentPivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationPivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>

                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_tweenColor</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_updateColor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaOffset</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaOffset</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redOffset</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redOffset</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenOffset</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenOffset</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueOffset</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueOffset</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_updateColor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaOffset</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redOffset</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenOffset</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueOffset</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_durationColor</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_updateState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">.</span><span class="nx">blend</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span><span class="p">);</span>

                            <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originPivot</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originPivot</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

                            <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                        <span class="p">}</span>

                        <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">()[</span><span class="mi">0</span><span class="p">];</span>

                        <span class="k">this</span><span class="p">.</span><span class="nx">tweenActive</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">displayIndex</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>

                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_updateColor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaOffset</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redOffset</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenOffset</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueOffset</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaMultiplier</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redMultiplier</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenMultiplier</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueMultiplier</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_updateColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                        <span class="p">}</span>

                        <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span><span class="p">.</span><span class="nx">_arriveAtFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_updateState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_bone</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animationState</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_timeline</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_originTransform</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_originPivot</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">HALF_PI</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">;</span>

            <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_pool</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">return</span> <span class="nx">TimelineState</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">animation</span><span class="p">.</span><span class="nx">TimelineState</span> <span class="o">=</span> <span class="nx">TimelineState</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">AnimationState</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">AnimationState</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="p">}</span>
            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_borrowObject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="k">new</span> <span class="nx">AnimationState</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_returnObject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationState</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">animationState</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">[</span><span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">animationState</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nx">animationState</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_clear</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">clear</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fadeIn</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">armature</span><span class="p">,</span> <span class="nx">clip</span><span class="p">,</span> <span class="nx">fadeInTime</span><span class="p">,</span> <span class="nx">timeScale</span><span class="p">,</span> <span class="nx">loop</span><span class="p">,</span> <span class="nx">layer</span><span class="p">,</span> <span class="nx">displayControl</span><span class="p">,</span> <span class="nx">pauseBeforeFadeInComplete</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">layer</span> <span class="o">=</span> <span class="nx">layer</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">clip</span> <span class="o">=</span> <span class="nx">clip</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">clip</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">totalTime</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">clip</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span> <span class="o">=</span> <span class="nx">armature</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">clip</span><span class="p">.</span><span class="nx">duration</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">clip</span><span class="p">.</span><span class="nx">frameRate</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">timeScale</span> <span class="o">==</span> <span class="kc">Infinity</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">timeScale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">totalTime</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">timeScale</span> <span class="o">=</span> <span class="nx">timeScale</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">=</span> <span class="nx">loop</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_pauseBeforeFadeInComplete</span> <span class="o">=</span> <span class="nx">pauseBeforeFadeInComplete</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeInTime</span> <span class="o">=</span> <span class="nx">fadeInTime</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeScale</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeState</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutBeginTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutWeight</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeWeight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeIn</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOut</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">loopCount</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">displayControl</span> <span class="o">=</span> <span class="nx">displayControl</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">isPlaying</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">isComplete</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">weight</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">blend</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">enabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">tweenEnabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">updateTimelineStates</span><span class="p">();</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fadeOut</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">fadeOutTime</span><span class="p">,</span> <span class="nx">pause</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">pause</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">pause</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutWeight</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeState</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutWeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fadeWeight</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutTime</span> <span class="o">=</span> <span class="nx">fadeOutTime</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeScale</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutBeginTime</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOut</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">isPlaying</span> <span class="o">=</span> <span class="o">!</span><span class="nx">pause</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">displayControl</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">)</span> <span class="p">{</span>
                    <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">[</span><span class="nx">index</span><span class="p">]).</span><span class="nx">fadeOut</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">enabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">play</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">isPlaying</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">stop</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">isPlaying</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getMixingTransform</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timelineName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nb">Number</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">]);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addMixingTransform</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timelineName</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">recursive</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">type</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">recursive</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">recursive</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">clip</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">clip</span><span class="p">.</span><span class="nx">getTimeline</span><span class="p">(</span><span class="nx">timelineName</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span> <span class="o">=</span> <span class="p">{};</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">recursive</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">bone</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">currentBone</span><span class="p">;</span>
                        <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">bone</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">timelineName</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">currentBone</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">currentBone</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">currentBone</span> <span class="o">==</span> <span class="nx">bone</span> <span class="o">||</span> <span class="nx">currentBone</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">bone</span><span class="p">)))</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">[</span><span class="nx">bone</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
                    <span class="p">}</span>

                    <span class="k">this</span><span class="p">.</span><span class="nx">updateTimelineStates</span><span class="p">();</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeMixingTransform</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timelineName</span><span class="p">,</span> <span class="nx">recursive</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">timelineName</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">timelineName</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">recursive</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">recursive</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">timelineName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">recursive</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">bone</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">currentBone</span><span class="p">;</span>
                        <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">bone</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">timelineName</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">currentBone</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">currentBone</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">currentBone</span> <span class="o">==</span> <span class="nx">bone</span> <span class="o">||</span> <span class="nx">currentBone</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">bone</span><span class="p">)))</span> <span class="p">{</span>
                                <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">[</span><span class="nx">bone</span><span class="p">.</span><span class="nx">name</span><span class="p">];</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">];</span>
                    <span class="p">}</span>

                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">hasMixing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hasMixing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">updateTimelineStates</span><span class="p">();</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">advanceTime</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">passedTime</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">enabled</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="kd">var</span> <span class="nx">event</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">isComplete</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_fadeIn</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_fadeIn</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_IN</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_IN</span><span class="p">);</span>
                        <span class="nx">event</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_fadeOut</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOut</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_OUT</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_OUT</span><span class="p">);</span>
                        <span class="nx">event</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">+=</span> <span class="nx">passedTime</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeScale</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isPlaying</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isComplete</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">progress</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">currentLoopCount</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_pauseBeforeFadeInComplete</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_pauseBeforeFadeInComplete</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">isPlaying</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                        <span class="nx">progress</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                        <span class="nx">currentLoopCount</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">progress</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">progress</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">totalTime</span><span class="p">;</span>

                        <span class="nx">currentLoopCount</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">progress</span><span class="p">);</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">currentLoopCount</span> <span class="o">!=</span> <span class="k">this</span><span class="p">.</span><span class="nx">loopCount</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loopCount</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">START</span><span class="p">))</span> <span class="p">{</span>
                                    <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">START</span><span class="p">);</span>
                                    <span class="nx">event</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">loopCount</span> <span class="o">=</span> <span class="nx">currentLoopCount</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loopCount</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loopCount</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">loopCount</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">isComplete</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                                    <span class="nx">progress</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                                    <span class="nx">currentLoopCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">COMPLETE</span><span class="p">))</span> <span class="p">{</span>
                                        <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">COMPLETE</span><span class="p">);</span>
                                        <span class="nx">event</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                                        <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
                                    <span class="p">}</span>
                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">LOOP_COMPLETE</span><span class="p">))</span> <span class="p">{</span>
                                        <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">LOOP_COMPLETE</span><span class="p">);</span>
                                        <span class="nx">event</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                                        <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
                                    <span class="p">}</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>

                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">)</span> <span class="p">{</span>
                        <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">[</span><span class="nx">index</span><span class="p">]).</span><span class="nx">update</span><span class="p">(</span><span class="nx">progress</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="kd">var</span> <span class="nx">frameList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">clip</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">frameList</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">playedTime</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">totalTime</span> <span class="o">*</span> <span class="p">(</span><span class="nx">progress</span> <span class="o">-</span> <span class="nx">currentLoopCount</span><span class="p">);</span>
                        <span class="kd">var</span> <span class="nx">isArrivedFrame</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">frameIndex</span><span class="p">;</span>
                        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span> <span class="o">||</span> <span class="nx">playedTime</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">position</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">duration</span> <span class="o">||</span> <span class="nx">playedTime</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">.</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">isArrivedFrame</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_arriveAtFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                            <span class="p">}</span>
                            <span class="nx">isArrivedFrame</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">frameIndex</span> <span class="o">=</span> <span class="nx">frameList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">);</span>
                                <span class="nx">frameIndex</span><span class="o">++</span><span class="p">;</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">frameIndex</span> <span class="o">&gt;=</span> <span class="nx">frameList</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">frameIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                                <span class="p">}</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span> <span class="o">=</span> <span class="nx">frameList</span><span class="p">[</span><span class="nx">frameIndex</span><span class="p">];</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span> <span class="o">=</span> <span class="nx">frameList</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                            <span class="p">}</span>
                        <span class="p">}</span>

                        <span class="k">if</span> <span class="p">(</span><span class="nx">isArrivedFrame</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_arriveAtFrame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_fadeState</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_fadeInTime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_fadeWeight</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_fadeState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">isPlaying</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_IN_COMPLETE</span><span class="p">))</span> <span class="p">{</span>
                            <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_IN_COMPLETE</span><span class="p">);</span>
                            <span class="nx">event</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_fadeWeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fadeInTime</span><span class="p">;</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_fadeWeight</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_fadeWeight</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_fadeState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isPlaying</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">-=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fadeInTime</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">isPlaying</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_IN_COMPLETE</span><span class="p">))</span> <span class="p">{</span>
                                <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_IN_COMPLETE</span><span class="p">);</span>
                                <span class="nx">event</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_fadeState</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutTime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_fadeWeight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_fadeState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_OUT_COMPLETE</span><span class="p">))</span> <span class="p">{</span>
                            <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_OUT_COMPLETE</span><span class="p">);</span>
                            <span class="nx">event</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_fadeWeight</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutBeginTime</span><span class="p">)</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutTime</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutWeight</span><span class="p">;</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_fadeWeight</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_fadeWeight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">_fadeState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_OUT_COMPLETE</span><span class="p">))</span> <span class="p">{</span>
                                <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">AnimationEvent</span><span class="p">.</span><span class="nx">FADE_OUT_COMPLETE</span><span class="p">);</span>
                                <span class="nx">event</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
                            <span class="p">}</span>
                            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">isComplete</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">isComplete</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">_fadeOutWeight</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fadeInTime</span><span class="p">)</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeScale</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateTimelineStates</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">timelineName</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">]</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">removeTimelineState</span><span class="p">(</span><span class="nx">timelineName</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>

                    <span class="k">for</span> <span class="p">(</span><span class="nx">timelineName</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">])</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">addTimelineState</span><span class="p">(</span><span class="nx">timelineName</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">timelineName</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">clip</span><span class="p">.</span><span class="nx">getTimelines</span><span class="p">())</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">])</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">addTimelineState</span><span class="p">(</span><span class="nx">timelineName</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addTimelineState</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timelineName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">bone</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">getBone</span><span class="p">(</span><span class="nx">timelineName</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">bone</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">timelineState</span> <span class="o">=</span> <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_borrowObject</span><span class="p">();</span>
                    <span class="kd">var</span> <span class="nx">timeline</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">clip</span><span class="p">.</span><span class="nx">getTimeline</span><span class="p">(</span><span class="nx">timelineName</span><span class="p">);</span>
                    <span class="nx">timelineState</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">bone</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">timeline</span><span class="p">);</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">timelineState</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeTimelineState</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timelineName</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">TimelineState</span><span class="p">.</span><span class="nx">_returnObject</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">]);</span>
                <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">];</span>
            <span class="p">};</span>

            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">clip</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">enabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_currentFrame</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_mixingTransforms</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">timelineName</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">removeTimelineState</span><span class="p">(</span><span class="nx">timelineName</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_pool</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">return</span> <span class="nx">AnimationState</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">animation</span><span class="p">.</span><span class="nx">AnimationState</span> <span class="o">=</span> <span class="nx">AnimationState</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">Animation</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">Animation</span><span class="p">(</span><span class="nx">armature</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span> <span class="o">=</span> <span class="nx">armature</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_isPlaying</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">animationNameList</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">tweenEnabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">timeScale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getLastAnimationName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span> <span class="p">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">.</span><span class="nx">name</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getLastAnimationState</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getAnimationDataList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setAnimationDataList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">animationNameList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">animationNameList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">animationNameList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">name</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getIsPlaying</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_isPlaying</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">getIsComplete</span><span class="p">();</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getIsComplete</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">.</span><span class="nx">isComplete</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                    <span class="k">while</span> <span class="p">(</span><span class="nx">j</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">animationStateList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                        <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">animationStateList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">isComplete</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">animationStateList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                    <span class="k">while</span> <span class="p">(</span><span class="nx">j</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_returnObject</span><span class="p">(</span><span class="nx">animationStateList</span><span class="p">[</span><span class="nx">j</span><span class="p">]);</span>
                    <span class="p">}</span>
                    <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">animationNameList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">animationNameList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">gotoAndPlay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationName</span><span class="p">,</span> <span class="nx">fadeInTime</span><span class="p">,</span> <span class="nx">duration</span><span class="p">,</span> <span class="nx">loop</span><span class="p">,</span> <span class="nx">layer</span><span class="p">,</span> <span class="nx">group</span><span class="p">,</span> <span class="nx">fadeOutMode</span><span class="p">,</span> <span class="nx">displayControl</span><span class="p">,</span> <span class="nx">pauseFadeOut</span><span class="p">,</span> <span class="nx">pauseFadeIn</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">fadeInTime</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">fadeInTime</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">duration</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">duration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">loop</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">loop</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">layer</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">group</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">group</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">fadeOutMode</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">fadeOutMode</span> <span class="o">=</span> <span class="nx">Animation</span><span class="p">.</span><span class="nx">SAME_LAYER_AND_GROUP</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">displayControl</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">displayControl</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">pauseFadeOut</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">pauseFadeOut</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">pauseFadeIn</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">pauseFadeIn</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">animationData</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">animationName</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">animationData</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">animationData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_isPlaying</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

                <span class="nx">fadeInTime</span> <span class="o">=</span> <span class="nx">fadeInTime</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">?</span> <span class="p">(</span><span class="nx">animationData</span><span class="p">.</span><span class="nx">fadeInTime</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">?</span> <span class="mf">0.3</span> <span class="p">:</span> <span class="nx">animationData</span><span class="p">.</span><span class="nx">fadeInTime</span><span class="p">)</span> <span class="p">:</span> <span class="nx">fadeInTime</span><span class="p">;</span>

                <span class="kd">var</span> <span class="nx">durationScale</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">duration</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">durationScale</span> <span class="o">=</span> <span class="nx">animationData</span><span class="p">.</span><span class="nx">scale</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="nx">animationData</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">durationScale</span> <span class="o">=</span> <span class="nx">duration</span> <span class="o">/</span> <span class="nx">animationData</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nx">loop</span> <span class="o">=</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">loop</span><span class="p">)</span> <span class="p">?</span> <span class="nx">animationData</span><span class="p">.</span><span class="nx">loop</span> <span class="p">:</span> <span class="nx">loop</span><span class="p">;</span>
                <span class="nx">layer</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">layer</span><span class="p">);</span>

                <span class="kd">var</span> <span class="nx">animationState</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">animationStateList</span><span class="p">;</span>
                <span class="k">switch</span> <span class="p">(</span><span class="nx">fadeOutMode</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">case</span> <span class="nx">Animation</span><span class="p">.</span><span class="na">NONE</span><span class="p">:</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="nx">Animation</span><span class="p">.</span><span class="na">SAME_LAYER</span><span class="p">:</span>
                        <span class="nx">animationStateList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">layer</span><span class="p">];</span>
                        <span class="nx">i</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                        <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">animationState</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                            <span class="nx">animationState</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="nx">fadeInTime</span><span class="p">,</span> <span class="nx">pauseFadeOut</span><span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="nx">Animation</span><span class="p">.</span><span class="na">SAME_GROUP</span><span class="p">:</span>
                        <span class="nx">j</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                        <span class="k">while</span> <span class="p">(</span><span class="nx">j</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">animationStateList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                            <span class="nx">i</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">animationState</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">animationState</span><span class="p">.</span><span class="nx">group</span> <span class="o">==</span> <span class="nx">group</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">animationState</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="nx">fadeInTime</span><span class="p">,</span> <span class="nx">pauseFadeOut</span><span class="p">);</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="nx">Animation</span><span class="p">.</span><span class="na">ALL</span><span class="p">:</span>
                        <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                        <span class="k">while</span> <span class="p">(</span><span class="nx">j</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">animationStateList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                            <span class="nx">i</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">animationState</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                                <span class="nx">animationState</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="nx">fadeInTime</span><span class="p">,</span> <span class="nx">pauseFadeOut</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="nx">Animation</span><span class="p">.</span><span class="na">SAME_LAYER_AND_GROUP</span><span class="p">:</span>
                    <span class="na">default</span><span class="p">:</span>
                        <span class="nx">animationStateList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">layer</span><span class="p">];</span>
                        <span class="nx">i</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                        <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">animationState</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">animationState</span><span class="p">.</span><span class="nx">group</span> <span class="o">==</span> <span class="nx">group</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">animationState</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="nx">fadeInTime</span><span class="p">,</span> <span class="nx">pauseFadeOut</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                        <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span> <span class="o">=</span> <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_borrowObject</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">.</span><span class="nx">group</span> <span class="o">=</span> <span class="nx">group</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">.</span><span class="nx">tweenEnabled</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tweenEnabled</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">,</span> <span class="nx">animationData</span><span class="p">,</span> <span class="nx">fadeInTime</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">durationScale</span><span class="p">,</span> <span class="nx">loop</span><span class="p">,</span> <span class="nx">layer</span><span class="p">,</span> <span class="nx">displayControl</span><span class="p">,</span> <span class="nx">pauseFadeIn</span><span class="p">);</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">addState</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">);</span>

                <span class="kd">var</span> <span class="nx">slotList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">slot</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">childArmature</span><span class="p">;</span>
                <span class="nx">i</span> <span class="o">=</span> <span class="nx">slotList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">slot</span> <span class="o">=</span> <span class="nx">slotList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="nx">childArmature</span> <span class="o">=</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">getChildArmature</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">childArmature</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">childArmature</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">gotoAndPlay</span><span class="p">(</span><span class="nx">animationName</span><span class="p">,</span> <span class="nx">fadeInTime</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">play</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">gotoAndPlay</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">name</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_isPlaying</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_isPlaying</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">gotoAndPlay</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_lastAnimationState</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">stop</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_isPlaying</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getState</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">layer</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">layer</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
                <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">l</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">layer</span> <span class="o">&gt;=</span> <span class="nx">l</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">layer</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="kd">var</span> <span class="nx">animationStateList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">layer</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">animationStateList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">animationStateList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="nx">animationStateList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasAnimation</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">animationName</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">advanceTime</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">passedTime</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_isPlaying</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">passedTime</span> <span class="o">*=</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeScale</span><span class="p">;</span>

                <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">j</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">l</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">stateListLength</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">bone</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">boneName</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">weigthLeft</span><span class="p">;</span>

                <span class="kd">var</span> <span class="nx">x</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">y</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">skewX</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">skewY</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">scaleX</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">scaleY</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">pivotX</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">pivotY</span><span class="p">;</span>

                <span class="kd">var</span> <span class="nx">layerTotalWeight</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">animationStateList</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">animationState</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">timelineState</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">weight</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">transform</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">pivot</span><span class="p">;</span>

                <span class="nx">l</span><span class="o">--</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">k</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">bone</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armature</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">[</span><span class="nx">k</span><span class="p">];</span>
                    <span class="nx">boneName</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                    <span class="nx">weigthLeft</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

                    <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">skewX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">skewY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">scaleX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">scaleY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">pivotX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">pivotY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

                    <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                    <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">layerTotalWeight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                        <span class="nx">animationStateList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                        <span class="nx">stateListLength</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                        <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">stateListLength</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">animationState</span> <span class="o">=</span> <span class="nx">animationStateList</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">k</span> <span class="o">==</span> <span class="nx">l</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">animationState</span><span class="p">.</span><span class="nx">advanceTime</span><span class="p">(</span><span class="nx">passedTime</span><span class="p">))</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">removeState</span><span class="p">(</span><span class="nx">animationState</span><span class="p">);</span>
                                    <span class="nx">j</span><span class="o">--</span><span class="p">;</span>
                                    <span class="nx">stateListLength</span><span class="o">--</span><span class="p">;</span>
                                    <span class="k">continue</span><span class="p">;</span>
                                <span class="p">}</span>
                            <span class="p">}</span>

                            <span class="nx">timelineState</span> <span class="o">=</span> <span class="nx">animationState</span><span class="p">.</span><span class="nx">_timelineStates</span><span class="p">[</span><span class="nx">boneName</span><span class="p">];</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">timelineState</span> <span class="o">&amp;&amp;</span> <span class="nx">timelineState</span><span class="p">.</span><span class="nx">tweenActive</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">weight</span> <span class="o">=</span> <span class="nx">animationState</span><span class="p">.</span><span class="nx">_fadeWeight</span> <span class="o">*</span> <span class="nx">animationState</span><span class="p">.</span><span class="nx">weight</span> <span class="o">*</span> <span class="nx">weigthLeft</span><span class="p">;</span>
                                <span class="nx">transform</span> <span class="o">=</span> <span class="nx">timelineState</span><span class="p">.</span><span class="nx">transform</span><span class="p">;</span>
                                <span class="nx">pivot</span> <span class="o">=</span> <span class="nx">timelineState</span><span class="p">.</span><span class="nx">pivot</span><span class="p">;</span>
                                <span class="nx">x</span> <span class="o">+=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">weight</span><span class="p">;</span>
                                <span class="nx">y</span> <span class="o">+=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">weight</span><span class="p">;</span>
                                <span class="nx">skewX</span> <span class="o">+=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">*</span> <span class="nx">weight</span><span class="p">;</span>
                                <span class="nx">skewY</span> <span class="o">+=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">*</span> <span class="nx">weight</span><span class="p">;</span>
                                <span class="nx">scaleX</span> <span class="o">+=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">*</span> <span class="nx">weight</span><span class="p">;</span>
                                <span class="nx">scaleY</span> <span class="o">+=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">*</span> <span class="nx">weight</span><span class="p">;</span>
                                <span class="nx">pivotX</span> <span class="o">+=</span> <span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">weight</span><span class="p">;</span>
                                <span class="nx">pivotY</span> <span class="o">+=</span> <span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">weight</span><span class="p">;</span>

                                <span class="nx">layerTotalWeight</span> <span class="o">+=</span> <span class="nx">weight</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>

                        <span class="k">if</span> <span class="p">(</span><span class="nx">layerTotalWeight</span> <span class="o">&gt;=</span> <span class="nx">weigthLeft</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">weigthLeft</span> <span class="o">-=</span> <span class="nx">layerTotalWeight</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="nx">transform</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">tween</span><span class="p">;</span>
                    <span class="nx">pivot</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">.</span><span class="nx">_tweenPivot</span><span class="p">;</span>

                    <span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
                    <span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
                    <span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">skewX</span><span class="p">;</span>
                    <span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">skewY</span><span class="p">;</span>
                    <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="nx">scaleX</span><span class="p">;</span>
                    <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="nx">scaleY</span><span class="p">;</span>
                    <span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">pivotX</span><span class="p">;</span>
                    <span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">pivotY</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addLayer</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">layer</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">layer</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">layer</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">layer</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">layer</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addState</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationState</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">animationStateList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">animationState</span><span class="p">.</span><span class="nx">layer</span><span class="p">];</span>
                <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">animationState</span><span class="p">);</span>
            <span class="p">};</span>

            <span class="nx">Animation</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeState</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationState</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">layer</span> <span class="o">=</span> <span class="nx">animationState</span><span class="p">.</span><span class="nx">layer</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">animationStateList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">[</span><span class="nx">layer</span><span class="p">];</span>
                <span class="nx">animationStateList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">animationStateList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">animationState</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>

                <span class="nx">AnimationState</span><span class="p">.</span><span class="nx">_returnObject</span><span class="p">(</span><span class="nx">animationState</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">animationStateList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">layer</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_animationLayer</span><span class="p">.</span><span class="nx">length</span><span class="o">--</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="nx">Animation</span><span class="p">.</span><span class="nx">NONE</span> <span class="o">=</span> <span class="s2">"none"</span><span class="p">;</span>
            <span class="nx">Animation</span><span class="p">.</span><span class="nx">SAME_LAYER</span> <span class="o">=</span> <span class="s2">"sameLayer"</span><span class="p">;</span>
            <span class="nx">Animation</span><span class="p">.</span><span class="nx">SAME_GROUP</span> <span class="o">=</span> <span class="s2">"sameGroup"</span><span class="p">;</span>
            <span class="nx">Animation</span><span class="p">.</span><span class="nx">SAME_LAYER_AND_GROUP</span> <span class="o">=</span> <span class="s2">"sameLayerAndGroup"</span><span class="p">;</span>
            <span class="nx">Animation</span><span class="p">.</span><span class="nx">ALL</span> <span class="o">=</span> <span class="s2">"all"</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">Animation</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">animation</span><span class="p">.</span><span class="nx">Animation</span> <span class="o">=</span> <span class="nx">Animation</span><span class="p">;</span>
    <span class="p">})(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">animation</span> <span class="o">||</span> <span class="p">(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">animation</span> <span class="o">=</span> <span class="p">{}));</span>
    <span class="kd">var</span> <span class="nx">animation</span> <span class="o">=</span> <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">animation</span><span class="p">;</span>

    <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">objects</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">DBTransform</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">DBTransform</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">DBTransform</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getRotation</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">skewX</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="nx">DBTransform</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setRotation</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DBTransform</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">copy</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">transform</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DBTransform</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="s2">"[DBTransform (x="</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s2">" y="</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="s2">" skewX="</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="s2">" skewY="</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="s2">" scaleX="</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">+</span> <span class="s2">" scaleY="</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">+</span> <span class="s2">")]"</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">DBTransform</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">DBTransform</span> <span class="o">=</span> <span class="nx">DBTransform</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">Frame</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">Frame</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">Frame</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">Frame</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">Frame</span> <span class="o">=</span> <span class="nx">Frame</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">TransformFrame</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">__extends</span><span class="p">(</span><span class="nx">TransformFrame</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
            <span class="kd">function</span> <span class="nx">TransformFrame</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">tweenEasing</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">tweenRotate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">displayIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">zOrder</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">global</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DBTransform</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DBTransform</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">TransformFrame</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">global</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">TransformFrame</span><span class="p">;</span>
        <span class="p">})(</span><span class="nx">Frame</span><span class="p">);</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">TransformFrame</span> <span class="o">=</span> <span class="nx">TransformFrame</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">Timeline</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">Timeline</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_frameList</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">Timeline</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getFrameList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_frameList</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Timeline</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_frameList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_frameList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_frameList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_frameList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">Timeline</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addFrame</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_frameList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_frameList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_frameList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">Timeline</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">Timeline</span> <span class="o">=</span> <span class="nx">Timeline</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">TransformTimeline</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">__extends</span><span class="p">(</span><span class="nx">TransformTimeline</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
            <span class="kd">function</span> <span class="nx">TransformTimeline</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">originTransform</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DBTransform</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">originPivot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transformed</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">TransformTimeline</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span> <span class="o">==</span> <span class="nx">TransformTimeline</span><span class="p">.</span><span class="nx">HIDE_TIMELINE</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">originTransform</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">originPivot</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="nx">TransformTimeline</span><span class="p">.</span><span class="nx">HIDE_TIMELINE</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TransformTimeline</span><span class="p">();</span>
            <span class="k">return</span> <span class="nx">TransformTimeline</span><span class="p">;</span>
        <span class="p">})(</span><span class="nx">Timeline</span><span class="p">);</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">TransformTimeline</span> <span class="o">=</span> <span class="nx">TransformTimeline</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">AnimationData</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">__extends</span><span class="p">(</span><span class="nx">AnimationData</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
            <span class="kd">function</span> <span class="nx">AnimationData</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">frameRate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">loop</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">tweenEasing</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">fadeInTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_timelines</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="p">}</span>
            <span class="nx">AnimationData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getTimelines</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timelines</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">AnimationData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">timelineName</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timelines</span><span class="p">)</span> <span class="p">{</span>
                    <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_timelines</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">]).</span><span class="nx">dispose</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_timelines</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">AnimationData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getTimeline</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timelineName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timelines</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">];</span>
            <span class="p">};</span>

            <span class="nx">AnimationData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addTimeline</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timeline</span><span class="p">,</span> <span class="nx">timelineName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">timeline</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_timelines</span><span class="p">[</span><span class="nx">timelineName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">timeline</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">AnimationData</span><span class="p">;</span>
        <span class="p">})(</span><span class="nx">Timeline</span><span class="p">);</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">AnimationData</span> <span class="o">=</span> <span class="nx">AnimationData</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">DisplayData</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">DisplayData</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DBTransform</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">DisplayData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">pivot</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="nx">DisplayData</span><span class="p">.</span><span class="nx">ARMATURE</span> <span class="o">=</span> <span class="s2">"armature"</span><span class="p">;</span>
            <span class="nx">DisplayData</span><span class="p">.</span><span class="nx">IMAGE</span> <span class="o">=</span> <span class="s2">"image"</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">DisplayData</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">DisplayData</span> <span class="o">=</span> <span class="nx">DisplayData</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">SlotData</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">SlotData</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">zOrder</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">SlotData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getDisplayDataList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">SlotData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">SlotData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addDisplayData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">displayData</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">displayData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">displayData</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">displayData</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">SlotData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getDisplayData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">displayName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">displayName</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">SlotData</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">SlotData</span> <span class="o">=</span> <span class="nx">SlotData</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">BoneData</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">BoneData</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">global</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DBTransform</span><span class="p">();</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DBTransform</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">BoneData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">global</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">BoneData</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">BoneData</span> <span class="o">=</span> <span class="nx">BoneData</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">SkinData</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">SkinData</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="p">}</span>
            <span class="nx">SkinData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getSlotDataList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">SkinData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">SkinData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getSlotData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">SkinData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addSlotData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotData</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">slotData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">slotData</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_slotDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">slotData</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">SkinData</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">SkinData</span> <span class="o">=</span> <span class="nx">SkinData</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">ArmatureData</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">ArmatureData</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="p">}</span>
            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBoneDataList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getSkinDataList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getAnimationDataList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBoneData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">boneName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">boneName</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getSkinData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skinName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">skinName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                <span class="p">}</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">skinName</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getAnimationData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">animationName</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addBoneData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">boneData</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">boneData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">boneData</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">boneData</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addSkinData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skinData</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">skinData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">skinData</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_skinDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">skinData</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addAnimationData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationData</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">animationData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">animationData</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_animationDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">animationData</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sortBoneDataList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="kd">var</span> <span class="nx">helpArray</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">boneData</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="kd">var</span> <span class="nx">level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">parentData</span> <span class="o">=</span> <span class="nx">boneData</span><span class="p">;</span>
                    <span class="k">while</span> <span class="p">(</span><span class="nx">parentData</span> <span class="o">&amp;&amp;</span> <span class="nx">parentData</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">level</span><span class="o">++</span><span class="p">;</span>
                        <span class="nx">parentData</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getBoneData</span><span class="p">(</span><span class="nx">parentData</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="nx">helpArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="na">level</span><span class="p">:</span> <span class="nx">level</span><span class="p">,</span> <span class="na">boneData</span><span class="p">:</span> <span class="nx">boneData</span> <span class="p">};</span>
                <span class="p">}</span>

                <span class="nx">helpArray</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sortBoneData</span><span class="p">);</span>

                <span class="nx">i</span> <span class="o">=</span> <span class="nx">helpArray</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_boneDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">helpArray</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">boneData</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">ArmatureData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sortBoneData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">object1</span><span class="p">,</span> <span class="nx">object2</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">object1</span><span class="p">.</span><span class="nx">level</span> <span class="o">&gt;</span> <span class="nx">object2</span><span class="p">.</span><span class="nx">level</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">ArmatureData</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">ArmatureData</span> <span class="o">=</span> <span class="nx">ArmatureData</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">SkeletonData</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">SkeletonData</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_subTexturePivots</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="p">}</span>
            <span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getArmatureNames</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">nameList</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">armatureDataIndex</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">nameList</span><span class="p">[</span><span class="nx">nameList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">[</span><span class="nx">armatureDataIndex</span><span class="p">].</span><span class="nx">name</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">nameList</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getArmatureDataList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">armatureDataIndex</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">[</span><span class="nx">armatureDataIndex</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_subTexturePivots</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getArmatureData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">armatureName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">armatureName</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addArmatureData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">armatureData</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">armatureData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">armatureData</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">armatureData</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeArmatureData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">armatureData</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">armatureData</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeArmatureDataByName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">armatureName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">armatureName</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_armatureDataList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getSubTexturePivot</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">subTextureName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_subTexturePivots</span><span class="p">[</span><span class="nx">subTextureName</span><span class="p">];</span>
            <span class="p">};</span>

            <span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addSubTexturePivot</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">subTextureName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_subTexturePivots</span><span class="p">[</span><span class="nx">subTextureName</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">point</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
                    <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_subTexturePivots</span><span class="p">[</span><span class="nx">subTextureName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">point</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="nx">point</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">SkeletonData</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeSubTexturePivot</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">subTextureName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">subTextureName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_subTexturePivots</span><span class="p">[</span><span class="nx">subTextureName</span><span class="p">];</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">subTextureName</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_subTexturePivots</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_subTexturePivots</span><span class="p">[</span><span class="nx">subTextureName</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">SkeletonData</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">SkeletonData</span> <span class="o">=</span> <span class="nx">SkeletonData</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">DataParser</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">DataParser</span><span class="p">()</span> <span class="p">{</span>
            <span class="p">}</span>
            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTextureAtlasData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">rawData</span><span class="p">,</span> <span class="nx">scale</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">scale</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">rawData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="kd">var</span> <span class="nx">textureAtlasData</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="nx">textureAtlasData</span><span class="p">.</span><span class="nx">__name</span> <span class="o">=</span> <span class="nx">rawData</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span><span class="p">];</span>
                <span class="kd">var</span> <span class="nx">subTextureList</span> <span class="o">=</span> <span class="nx">rawData</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">SUB_TEXTURE</span><span class="p">];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">subTextureList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">subTextureObject</span> <span class="o">=</span> <span class="nx">subTextureList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="kd">var</span> <span class="nx">subTextureName</span> <span class="o">=</span> <span class="nx">subTextureObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span><span class="p">];</span>
                    <span class="kd">var</span> <span class="nx">subTextureData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span><span class="nb">Number</span><span class="p">(</span><span class="nx">subTextureObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_X</span><span class="p">])</span> <span class="o">/</span> <span class="nx">scale</span><span class="p">,</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">subTextureObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_Y</span><span class="p">])</span> <span class="o">/</span> <span class="nx">scale</span><span class="p">,</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">subTextureObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_WIDTH</span><span class="p">])</span> <span class="o">/</span> <span class="nx">scale</span><span class="p">,</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">subTextureObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_HEIGHT</span><span class="p">])</span> <span class="o">/</span> <span class="nx">scale</span><span class="p">);</span>
                    <span class="nx">textureAtlasData</span><span class="p">[</span><span class="nx">subTextureName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">subTextureData</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="nx">textureAtlasData</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseSkeletonData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">rawData</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">rawData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="kd">var</span> <span class="nx">frameRate</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">rawData</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_FRAME_RATE</span><span class="p">]);</span>
                <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkeletonData</span><span class="p">();</span>
                <span class="nx">data</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">rawData</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span><span class="p">];</span>

                <span class="kd">var</span> <span class="nx">armatureObjectList</span> <span class="o">=</span> <span class="nx">rawData</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">ARMATURE</span><span class="p">];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">armatureObjectList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">armatureObject</span> <span class="o">=</span> <span class="nx">armatureObjectList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="nx">data</span><span class="p">.</span><span class="nx">addArmatureData</span><span class="p">(</span><span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseArmatureData</span><span class="p">(</span><span class="nx">armatureObject</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">));</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseArmatureData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">armatureObject</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">armatureData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArmatureData</span><span class="p">();</span>
                <span class="nx">armatureData</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">armatureObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span><span class="p">];</span>

                <span class="kd">var</span> <span class="nx">boneObjectList</span> <span class="o">=</span> <span class="nx">armatureObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">BONE</span><span class="p">];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">boneObjectList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">boneObject</span> <span class="o">=</span> <span class="nx">boneObjectList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="nx">armatureData</span><span class="p">.</span><span class="nx">addBoneData</span><span class="p">(</span><span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseBoneData</span><span class="p">(</span><span class="nx">boneObject</span><span class="p">));</span>
                <span class="p">}</span>

                <span class="kd">var</span> <span class="nx">skinObjectList</span> <span class="o">=</span> <span class="nx">armatureObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">SKIN</span><span class="p">];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">skinObjectList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">skinObject</span> <span class="o">=</span> <span class="nx">skinObjectList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="nx">armatureData</span><span class="p">.</span><span class="nx">addSkinData</span><span class="p">(</span><span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseSkinData</span><span class="p">(</span><span class="nx">skinObject</span><span class="p">,</span> <span class="nx">data</span><span class="p">));</span>
                <span class="p">}</span>

                <span class="nx">utils</span><span class="p">.</span><span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">transformArmatureData</span><span class="p">(</span><span class="nx">armatureData</span><span class="p">);</span>
                <span class="nx">armatureData</span><span class="p">.</span><span class="nx">sortBoneDataList</span><span class="p">();</span>

                <span class="kd">var</span> <span class="nx">animationObjectList</span> <span class="o">=</span> <span class="nx">armatureObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">ANIMATION</span><span class="p">];</span>

                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">animationObjectList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">animationObject</span> <span class="o">=</span> <span class="nx">animationObjectList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="nx">armatureData</span><span class="p">.</span><span class="nx">addAnimationData</span><span class="p">(</span><span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseAnimationData</span><span class="p">(</span><span class="nx">animationObject</span><span class="p">,</span> <span class="nx">armatureData</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">));</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="nx">armatureData</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseBoneData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">boneObject</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">boneData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BoneData</span><span class="p">();</span>
                <span class="nx">boneData</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">boneObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span><span class="p">];</span>
                <span class="nx">boneData</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">boneObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_PARENT</span><span class="p">];</span>
                <span class="nx">boneData</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">boneObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_LENGTH</span><span class="p">])</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

                <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTransform</span><span class="p">(</span><span class="nx">boneObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">TRANSFORM</span><span class="p">],</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">global</span><span class="p">);</span>
                <span class="nx">boneData</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">global</span><span class="p">);</span>

                <span class="k">return</span> <span class="nx">boneData</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseSkinData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">skinObject</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">skinData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkinData</span><span class="p">();</span>
                <span class="nx">skinData</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">skinObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span><span class="p">];</span>
                <span class="kd">var</span> <span class="nx">slotObjectList</span> <span class="o">=</span> <span class="nx">skinObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">SLOT</span><span class="p">];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">slotObjectList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">slotObject</span> <span class="o">=</span> <span class="nx">slotObjectList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="nx">skinData</span><span class="p">.</span><span class="nx">addSlotData</span><span class="p">(</span><span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseSlotData</span><span class="p">(</span><span class="nx">slotObject</span><span class="p">,</span> <span class="nx">data</span><span class="p">));</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="nx">skinData</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseSlotData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotObject</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">slotData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SlotData</span><span class="p">();</span>
                <span class="nx">slotData</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">slotObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span><span class="p">];</span>
                <span class="nx">slotData</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">slotObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_PARENT</span><span class="p">];</span>
                <span class="nx">slotData</span><span class="p">.</span><span class="nx">zOrder</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">slotObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_Z_ORDER</span><span class="p">]);</span>

                <span class="kd">var</span> <span class="nx">displayObjectList</span> <span class="o">=</span> <span class="nx">slotObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">DISPLAY</span><span class="p">];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">displayObjectList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">displayObject</span> <span class="o">=</span> <span class="nx">displayObjectList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="nx">slotData</span><span class="p">.</span><span class="nx">addDisplayData</span><span class="p">(</span><span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseDisplayData</span><span class="p">(</span><span class="nx">displayObject</span><span class="p">,</span> <span class="nx">data</span><span class="p">));</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="nx">slotData</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseDisplayData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">displayObject</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">displayData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DisplayData</span><span class="p">();</span>
                <span class="nx">displayData</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">displayObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span><span class="p">];</span>
                <span class="nx">displayData</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">displayObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_TYPE</span><span class="p">];</span>

                <span class="nx">displayData</span><span class="p">.</span><span class="nx">pivot</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">addSubTexturePivot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">displayData</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>

                <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTransform</span><span class="p">(</span><span class="nx">displayObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">TRANSFORM</span><span class="p">],</span> <span class="nx">displayData</span><span class="p">.</span><span class="nx">transform</span><span class="p">,</span> <span class="nx">displayData</span><span class="p">.</span><span class="nx">pivot</span><span class="p">);</span>

                <span class="k">return</span> <span class="nx">displayData</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseAnimationData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationObject</span><span class="p">,</span> <span class="nx">armatureData</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">animationData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AnimationData</span><span class="p">();</span>
                <span class="nx">animationData</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">animationObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span><span class="p">];</span>
                <span class="nx">animationData</span><span class="p">.</span><span class="nx">frameRate</span> <span class="o">=</span> <span class="nx">frameRate</span><span class="p">;</span>
                <span class="nx">animationData</span><span class="p">.</span><span class="nx">loop</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">animationObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_LOOP</span><span class="p">])</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nx">animationData</span><span class="p">.</span><span class="nx">fadeInTime</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">animationObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_FADE_IN_TIME</span><span class="p">]);</span>
                <span class="nx">animationData</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">animationObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_DURATION</span><span class="p">])</span> <span class="o">/</span> <span class="nx">frameRate</span><span class="p">;</span>
                <span class="nx">animationData</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">animationObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SCALE</span><span class="p">]);</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">animationObject</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_TWEEN_EASING</span><span class="p">))</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">tweenEase</span> <span class="o">=</span> <span class="nx">animationObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_TWEEN_EASING</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">tweenEase</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">tweenEase</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">animationData</span><span class="p">.</span><span class="nx">tweenEasing</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">animationData</span><span class="p">.</span><span class="nx">tweenEasing</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">tweenEase</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">animationData</span><span class="p">.</span><span class="nx">tweenEasing</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTimeline</span><span class="p">(</span><span class="nx">animationObject</span><span class="p">,</span> <span class="nx">animationData</span><span class="p">,</span> <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseMainFrame</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">);</span>

                <span class="kd">var</span> <span class="nx">timeline</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">timelineName</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">timelineObjectList</span> <span class="o">=</span> <span class="nx">animationObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">TIMELINE</span><span class="p">];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">timelineObjectList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">timelineObject</span> <span class="o">=</span> <span class="nx">timelineObjectList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="nx">timeline</span> <span class="o">=</span> <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTransformTimeline</span><span class="p">(</span><span class="nx">timelineObject</span><span class="p">,</span> <span class="nx">animationData</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">);</span>
                    <span class="nx">timelineName</span> <span class="o">=</span> <span class="nx">timelineObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span><span class="p">];</span>
                    <span class="nx">animationData</span><span class="p">.</span><span class="nx">addTimeline</span><span class="p">(</span><span class="nx">timeline</span><span class="p">,</span> <span class="nx">timelineName</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="nx">utils</span><span class="p">.</span><span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">addHideTimeline</span><span class="p">(</span><span class="nx">animationData</span><span class="p">,</span> <span class="nx">armatureData</span><span class="p">);</span>
                <span class="nx">utils</span><span class="p">.</span><span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">transformAnimationData</span><span class="p">(</span><span class="nx">animationData</span><span class="p">,</span> <span class="nx">armatureData</span><span class="p">);</span>

                <span class="k">return</span> <span class="nx">animationData</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTimeline</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timelineObject</span><span class="p">,</span> <span class="nx">timeline</span><span class="p">,</span> <span class="nx">frameParser</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">frame</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">frameObjectList</span> <span class="o">=</span> <span class="nx">timelineObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">FRAME</span><span class="p">];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">frameObjectList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">frameObject</span> <span class="o">=</span> <span class="nx">frameObjectList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="nx">frame</span> <span class="o">=</span> <span class="nx">frameParser</span><span class="p">(</span><span class="nx">frameObject</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">);</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="nx">position</span><span class="p">;</span>
                    <span class="nx">timeline</span><span class="p">.</span><span class="nx">addFrame</span><span class="p">(</span><span class="nx">frame</span><span class="p">);</span>
                    <span class="nx">position</span> <span class="o">+=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="nx">timeline</span><span class="p">.</span><span class="nx">duration</span> <span class="o">-</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">position</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTransformTimeline</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timelineObject</span><span class="p">,</span> <span class="nx">duration</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">timeline</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TransformTimeline</span><span class="p">();</span>
                <span class="nx">timeline</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="nx">duration</span><span class="p">;</span>

                <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTimeline</span><span class="p">(</span><span class="nx">timelineObject</span><span class="p">,</span> <span class="nx">timeline</span><span class="p">,</span> <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTransformFrame</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">);</span>

                <span class="nx">timeline</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">timelineObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SCALE</span><span class="p">]);</span>
                <span class="nx">timeline</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">timelineObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_OFFSET</span><span class="p">]);</span>

                <span class="k">return</span> <span class="nx">timeline</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseFrame</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameObject</span><span class="p">,</span> <span class="nx">frame</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">frame</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_DURATION</span><span class="p">])</span> <span class="o">/</span> <span class="nx">frameRate</span><span class="p">;</span>
                <span class="nx">frame</span><span class="p">.</span><span class="nx">action</span> <span class="o">=</span> <span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_ACTION</span><span class="p">];</span>
                <span class="nx">frame</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_EVENT</span><span class="p">];</span>
                <span class="nx">frame</span><span class="p">.</span><span class="nx">sound</span> <span class="o">=</span> <span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SOUND</span><span class="p">];</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseMainFrame</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameObject</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Frame</span><span class="p">();</span>
                <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseFrame</span><span class="p">(</span><span class="nx">frameObject</span><span class="p">,</span> <span class="nx">frame</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">);</span>
                <span class="k">return</span> <span class="nx">frame</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTransformFrame</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frameObject</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TransformFrame</span><span class="p">();</span>
                <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseFrame</span><span class="p">(</span><span class="nx">frameObject</span><span class="p">,</span> <span class="nx">frame</span><span class="p">,</span> <span class="nx">frameRate</span><span class="p">);</span>

                <span class="nx">frame</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_HIDE</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">frameObject</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_TWEEN_EASING</span><span class="p">))</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">tweenEase</span> <span class="o">=</span> <span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_TWEEN_EASING</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">tweenEase</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">tweenEase</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">tweenEasing</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">tweenEasing</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">tweenEase</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">tweenEasing</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nx">frame</span><span class="p">.</span><span class="nx">tweenRotate</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_TWEEN_ROTATE</span><span class="p">])</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nx">frame</span><span class="p">.</span><span class="nx">displayIndex</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_DISPLAY_INDEX</span><span class="p">])</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

                <span class="nx">frame</span><span class="p">.</span><span class="nx">zOrder</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_Z_ORDER</span><span class="p">])</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

                <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTransform</span><span class="p">(</span><span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">TRANSFORM</span><span class="p">],</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">global</span><span class="p">,</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">);</span>
                <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">global</span><span class="p">);</span>

                <span class="kd">var</span> <span class="nx">colorTransformObject</span> <span class="o">=</span> <span class="nx">frameObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">COLOR_TRANSFORM</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">colorTransformObject</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">ColorTransform</span><span class="p">();</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaOffset</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">colorTransformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_ALPHA_OFFSET</span><span class="p">]);</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redOffset</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">colorTransformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_RED_OFFSET</span><span class="p">]);</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenOffset</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">colorTransformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_GREEN_OFFSET</span><span class="p">]);</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueOffset</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">colorTransformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_BLUE_OFFSET</span><span class="p">]);</span>

                    <span class="nx">frame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">alphaMultiplier</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">colorTransformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_ALPHA_MULTIPLIER</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">;</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">redMultiplier</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">colorTransformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_RED_MULTIPLIER</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">;</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">greenMultiplier</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">colorTransformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_GREEN_MULTIPLIER</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">;</span>
                    <span class="nx">frame</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">blueMultiplier</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">colorTransformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_BLUE_MULTIPLIER</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="nx">frame</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">DataParser</span><span class="p">.</span><span class="nx">parseTransform</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">transformObject</span><span class="p">,</span> <span class="nx">transform</span><span class="p">,</span> <span class="nx">pivot</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">pivot</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">transformObject</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">transform</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">transformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_X</span><span class="p">]);</span>
                        <span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">transformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_Y</span><span class="p">]);</span>
                        <span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">transformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SKEW_X</span><span class="p">])</span> <span class="o">*</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">ANGLE_TO_RADIAN</span><span class="p">;</span>
                        <span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">transformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SKEW_Y</span><span class="p">])</span> <span class="o">*</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">ANGLE_TO_RADIAN</span><span class="p">;</span>
                        <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">transformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SCALE_X</span><span class="p">]);</span>
                        <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">transformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SCALE_Y</span><span class="p">]);</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">pivot</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">transformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_PIVOT_X</span><span class="p">]);</span>
                        <span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">transformObject</span><span class="p">[</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_PIVOT_Y</span><span class="p">]);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">DataParser</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">DataParser</span> <span class="o">=</span> <span class="nx">DataParser</span><span class="p">;</span>
    <span class="p">})(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">objects</span> <span class="o">||</span> <span class="p">(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">objects</span> <span class="o">=</span> <span class="p">{}));</span>
    <span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">objects</span><span class="p">;</span>

    <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">factorys</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">BaseFactory</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">__extends</span><span class="p">(</span><span class="nx">BaseFactory</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
            <span class="kd">function</span> <span class="nx">BaseFactory</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasLoadingDic</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="p">}</span>
            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getSkeletonData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addSkeletonData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Unnamed data!"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeSkeletonData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getTextureAtlas</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addTextureAtlas</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">textureAtlas</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">textureAtlas</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">||</span> <span class="nx">textureAtlas</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Unnamed data!"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">textureAtlas</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeTextureAtlas</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">disposeData</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">disposeData</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">disposeData</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">disposeData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasLoadingDic</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_currentDataName</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_currentTextureAtlasName</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">buildArmature</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">armatureName</span><span class="p">,</span> <span class="nx">animationName</span><span class="p">,</span> <span class="nx">skeletonName</span><span class="p">,</span> <span class="nx">textureAtlasName</span><span class="p">,</span> <span class="nx">skinName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">skeletonName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">[</span><span class="nx">skeletonName</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">armatureData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">getArmatureData</span><span class="p">(</span><span class="nx">armatureName</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">skeletonName</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">[</span><span class="nx">skeletonName</span><span class="p">];</span>
                        <span class="nx">armatureData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">getArmatureData</span><span class="p">(</span><span class="nx">armatureName</span><span class="p">);</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">armatureData</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">armatureData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_currentDataName</span> <span class="o">=</span> <span class="nx">skeletonName</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_currentTextureAtlasName</span> <span class="o">=</span> <span class="nx">textureAtlasName</span> <span class="o">||</span> <span class="nx">skeletonName</span><span class="p">;</span>

                <span class="kd">var</span> <span class="nx">armature</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_generateArmature</span><span class="p">();</span>
                <span class="nx">armature</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">armatureName</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">bone</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">boneData</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">boneDataList</span> <span class="o">=</span> <span class="nx">armatureData</span><span class="p">.</span><span class="nx">getBoneDataList</span><span class="p">();</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">boneDataList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">boneData</span> <span class="o">=</span> <span class="nx">boneDataList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="nx">bone</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">Bone</span><span class="p">();</span>
                    <span class="nx">bone</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                    <span class="nx">bone</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">transform</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">armatureData</span><span class="p">.</span><span class="nx">getBoneData</span><span class="p">(</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">parent</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">armature</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">bone</span><span class="p">,</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">armature</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">bone</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">animationName</span> <span class="o">&amp;&amp;</span> <span class="nx">animationName</span> <span class="o">!=</span> <span class="nx">armatureName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">animationArmatureData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">getArmatureData</span><span class="p">(</span><span class="nx">animationName</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">animationArmatureData</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">for</span> <span class="p">(</span><span class="nx">skeletonName</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">[</span><span class="nx">skeletonName</span><span class="p">];</span>
                            <span class="nx">animationArmatureData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">getArmatureData</span><span class="p">(</span><span class="nx">animationName</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">animationArmatureData</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">animationArmatureData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">armature</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">setAnimationDataList</span><span class="p">(</span><span class="nx">animationArmatureData</span><span class="p">.</span><span class="nx">getAnimationDataList</span><span class="p">());</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">armature</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">setAnimationDataList</span><span class="p">(</span><span class="nx">armatureData</span><span class="p">.</span><span class="nx">getAnimationDataList</span><span class="p">());</span>
                <span class="p">}</span>

                <span class="kd">var</span> <span class="nx">skinData</span> <span class="o">=</span> <span class="nx">armatureData</span><span class="p">.</span><span class="nx">getSkinData</span><span class="p">(</span><span class="nx">skinName</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">skinData</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="kd">var</span> <span class="nx">slot</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">displayData</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">childArmature</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">helpArray</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="kd">var</span> <span class="nx">slotData</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">slotDataList</span> <span class="o">=</span> <span class="nx">skinData</span><span class="p">.</span><span class="nx">getSlotDataList</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">displayDataList</span><span class="p">;</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">slotDataList</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">slotData</span> <span class="o">=</span> <span class="nx">slotDataList</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="nx">bone</span> <span class="o">=</span> <span class="nx">armature</span><span class="p">.</span><span class="nx">getBone</span><span class="p">(</span><span class="nx">slotData</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">bone</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">continue</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">displayDataList</span> <span class="o">=</span> <span class="nx">slotData</span><span class="p">.</span><span class="nx">getDisplayDataList</span><span class="p">();</span>
                    <span class="nx">slot</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_generateSlot</span><span class="p">();</span>
                    <span class="nx">slot</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">slotData</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                    <span class="nx">slot</span><span class="p">.</span><span class="nx">_originZOrder</span> <span class="o">=</span> <span class="nx">slotData</span><span class="p">.</span><span class="nx">zOrder</span><span class="p">;</span>
                    <span class="nx">slot</span><span class="p">.</span><span class="nx">_dislayDataList</span> <span class="o">=</span> <span class="nx">displayDataList</span><span class="p">;</span>

                    <span class="nx">helpArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">i</span> <span class="o">=</span> <span class="nx">displayDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                    <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">displayData</span> <span class="o">=</span> <span class="nx">displayDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                        <span class="k">switch</span> <span class="p">(</span><span class="nx">displayData</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">case</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">DisplayData</span><span class="p">.</span><span class="na">ARMATURE</span><span class="p">:</span>
                                <span class="nx">childArmature</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">buildArmature</span><span class="p">(</span><span class="nx">displayData</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentDataName</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_currentTextureAtlasName</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">childArmature</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">helpArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">childArmature</span><span class="p">;</span>
                                <span class="p">}</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">DisplayData</span><span class="p">.</span><span class="na">IMAGE</span><span class="p">:</span>
                            <span class="na">default</span><span class="p">:</span>
                                <span class="nx">helpArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_generateDisplay</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_currentTextureAtlasName</span><span class="p">],</span> <span class="nx">displayData</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">displayData</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">displayData</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
                                <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="nx">slot</span><span class="p">.</span><span class="nx">setDisplayList</span><span class="p">(</span><span class="nx">helpArray</span><span class="p">);</span>
                    <span class="nx">slot</span><span class="p">.</span><span class="nx">_changeDisplay</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
                    <span class="nx">bone</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">slot</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="nx">armature</span><span class="p">.</span><span class="nx">_slotsZOrderChanged</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="nx">armature</span><span class="p">.</span><span class="nx">advanceTime</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
                <span class="k">return</span> <span class="nx">armature</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getTextureDisplay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">textureName</span><span class="p">,</span> <span class="nx">textureAtlasName</span><span class="p">,</span> <span class="nx">pivotX</span><span class="p">,</span> <span class="nx">pivotY</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">textureAtlasName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">textureAtlas</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span><span class="p">[</span><span class="nx">textureAtlasName</span><span class="p">];</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">textureAtlas</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">textureAtlasName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">textureAtlasName</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">textureAtlas</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_textureAtlasDic</span><span class="p">[</span><span class="nx">textureAtlasName</span><span class="p">];</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">textureAtlas</span><span class="p">.</span><span class="nx">getRegion</span><span class="p">(</span><span class="nx">textureName</span><span class="p">))</span> <span class="p">{</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span>
                        <span class="nx">textureAtlas</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">textureAtlas</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">pivotX</span><span class="p">)</span> <span class="o">||</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">pivotY</span><span class="p">))</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dataDic</span><span class="p">[</span><span class="nx">textureAtlasName</span><span class="p">];</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                            <span class="kd">var</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">getSubTexturePivot</span><span class="p">(</span><span class="nx">textureName</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">pivot</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">pivotX</span> <span class="o">=</span> <span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                                <span class="nx">pivotY</span> <span class="o">=</span> <span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>

                    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_generateDisplay</span><span class="p">(</span><span class="nx">textureAtlas</span><span class="p">,</span> <span class="nx">textureName</span><span class="p">,</span> <span class="nx">pivotX</span><span class="p">,</span> <span class="nx">pivotY</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_generateArmature</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_generateSlot</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">BaseFactory</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_generateDisplay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">textureAtlas</span><span class="p">,</span> <span class="nx">fullName</span><span class="p">,</span> <span class="nx">pivotX</span><span class="p">,</span> <span class="nx">pivotY</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">BaseFactory</span><span class="p">;</span>
        <span class="p">})(</span><span class="nx">events</span><span class="p">.</span><span class="nx">EventDispatcher</span><span class="p">);</span>
        <span class="nx">factorys</span><span class="p">.</span><span class="nx">BaseFactory</span> <span class="o">=</span> <span class="nx">BaseFactory</span><span class="p">;</span>
    <span class="p">})(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">factorys</span> <span class="o">||</span> <span class="p">(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">factorys</span> <span class="o">=</span> <span class="p">{}));</span>
    <span class="kd">var</span> <span class="nx">factorys</span> <span class="o">=</span> <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">factorys</span><span class="p">;</span>

    <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">utils</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">ConstValues</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">ConstValues</span><span class="p">()</span> <span class="p">{</span>
            <span class="p">}</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">ANGLE_TO_RADIAN</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">;</span>

            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">DRAGON_BONES</span> <span class="o">=</span> <span class="s2">"dragonBones"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">ARMATURE</span> <span class="o">=</span> <span class="s2">"armature"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">SKIN</span> <span class="o">=</span> <span class="s2">"skin"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">BONE</span> <span class="o">=</span> <span class="s2">"bone"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">SLOT</span> <span class="o">=</span> <span class="s2">"slot"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">DISPLAY</span> <span class="o">=</span> <span class="s2">"display"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">ANIMATION</span> <span class="o">=</span> <span class="s2">"animation"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">TIMELINE</span> <span class="o">=</span> <span class="s2">"timeline"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">FRAME</span> <span class="o">=</span> <span class="s2">"frame"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">TRANSFORM</span> <span class="o">=</span> <span class="s2">"transform"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">COLOR_TRANSFORM</span> <span class="o">=</span> <span class="s2">"colorTransform"</span><span class="p">;</span>

            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">TEXTURE_ATLAS</span> <span class="o">=</span> <span class="s2">"TextureAtlas"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">SUB_TEXTURE</span> <span class="o">=</span> <span class="s2">"SubTexture"</span><span class="p">;</span>

            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_VERSION</span> <span class="o">=</span> <span class="s2">"version"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_IMAGE_PATH</span> <span class="o">=</span> <span class="s2">"imagePath"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_FRAME_RATE</span> <span class="o">=</span> <span class="s2">"frameRate"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_NAME</span> <span class="o">=</span> <span class="s2">"name"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_PARENT</span> <span class="o">=</span> <span class="s2">"parent"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_LENGTH</span> <span class="o">=</span> <span class="s2">"length"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_TYPE</span> <span class="o">=</span> <span class="s2">"type"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_FADE_IN_TIME</span> <span class="o">=</span> <span class="s2">"fadeInTime"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_DURATION</span> <span class="o">=</span> <span class="s2">"duration"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SCALE</span> <span class="o">=</span> <span class="s2">"scale"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_OFFSET</span> <span class="o">=</span> <span class="s2">"offset"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_LOOP</span> <span class="o">=</span> <span class="s2">"loop"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_EVENT</span> <span class="o">=</span> <span class="s2">"event"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SOUND</span> <span class="o">=</span> <span class="s2">"sound"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_ACTION</span> <span class="o">=</span> <span class="s2">"action"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_HIDE</span> <span class="o">=</span> <span class="s2">"hide"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_TWEEN_EASING</span> <span class="o">=</span> <span class="s2">"tweenEasing"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_TWEEN_ROTATE</span> <span class="o">=</span> <span class="s2">"tweenRotate"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_DISPLAY_INDEX</span> <span class="o">=</span> <span class="s2">"displayIndex"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_Z_ORDER</span> <span class="o">=</span> <span class="s2">"z"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_WIDTH</span> <span class="o">=</span> <span class="s2">"width"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_HEIGHT</span> <span class="o">=</span> <span class="s2">"height"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_X</span> <span class="o">=</span> <span class="s2">"x"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_Y</span> <span class="o">=</span> <span class="s2">"y"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SKEW_X</span> <span class="o">=</span> <span class="s2">"skX"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SKEW_Y</span> <span class="o">=</span> <span class="s2">"skY"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SCALE_X</span> <span class="o">=</span> <span class="s2">"scX"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_SCALE_Y</span> <span class="o">=</span> <span class="s2">"scY"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_PIVOT_X</span> <span class="o">=</span> <span class="s2">"pX"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_PIVOT_Y</span> <span class="o">=</span> <span class="s2">"pY"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_ALPHA_OFFSET</span> <span class="o">=</span> <span class="s2">"aO"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_RED_OFFSET</span> <span class="o">=</span> <span class="s2">"rO"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_GREEN_OFFSET</span> <span class="o">=</span> <span class="s2">"gO"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_BLUE_OFFSET</span> <span class="o">=</span> <span class="s2">"bO"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_ALPHA_MULTIPLIER</span> <span class="o">=</span> <span class="s2">"aM"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_RED_MULTIPLIER</span> <span class="o">=</span> <span class="s2">"rM"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_GREEN_MULTIPLIER</span> <span class="o">=</span> <span class="s2">"gM"</span><span class="p">;</span>
            <span class="nx">ConstValues</span><span class="p">.</span><span class="nx">A_BLUE_MULTIPLIER</span> <span class="o">=</span> <span class="s2">"bM"</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">ConstValues</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">ConstValues</span> <span class="o">=</span> <span class="nx">ConstValues</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">TransformUtil</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">TransformUtil</span><span class="p">()</span> <span class="p">{</span>
            <span class="p">}</span>
            <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">transformPointWithParent</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">transform</span><span class="p">,</span> <span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">helpMatrix</span> <span class="o">=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">_helpMatrix</span><span class="p">;</span>
                <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">transformToMatrix</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">helpMatrix</span><span class="p">);</span>
                <span class="nx">helpMatrix</span><span class="p">.</span><span class="nx">invert</span><span class="p">();</span>

                <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

                <span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">helpMatrix</span><span class="p">.</span><span class="nx">a</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">helpMatrix</span><span class="p">.</span><span class="nx">c</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">helpMatrix</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span>
                <span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">helpMatrix</span><span class="p">.</span><span class="nx">d</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">helpMatrix</span><span class="p">.</span><span class="nx">b</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">helpMatrix</span><span class="p">.</span><span class="nx">ty</span><span class="p">;</span>

                <span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">-</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">skewX</span><span class="p">);</span>
                <span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">-</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">skewY</span><span class="p">);</span>
            <span class="p">};</span>

            <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">transformToMatrix</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">transform</span><span class="p">,</span> <span class="nx">matrix</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">matrix</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">);</span>
                <span class="nx">matrix</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">);</span>
                <span class="nx">matrix</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="o">-</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">);</span>
                <span class="nx">matrix</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">);</span>
                <span class="nx">matrix</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                <span class="nx">matrix</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="nx">transform</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">radian</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">radian</span> <span class="o">%=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">DOUBLE_PI</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">radian</span> <span class="o">&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">radian</span> <span class="o">-=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">DOUBLE_PI</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">radian</span> <span class="o">&lt;</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">radian</span> <span class="o">+=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">DOUBLE_PI</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">radian</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">DOUBLE_PI</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
            <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">_helpMatrix</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">Matrix</span><span class="p">();</span>
            <span class="k">return</span> <span class="nx">TransformUtil</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">TransformUtil</span> <span class="o">=</span> <span class="nx">TransformUtil</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">DBDataUtil</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">DBDataUtil</span><span class="p">()</span> <span class="p">{</span>
            <span class="p">}</span>
            <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">transformArmatureData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">armatureData</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">boneDataList</span> <span class="o">=</span> <span class="nx">armatureData</span><span class="p">.</span><span class="nx">getBoneDataList</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">boneDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">boneData</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">parentBoneData</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">boneData</span> <span class="o">=</span> <span class="nx">boneDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">parentBoneData</span> <span class="o">=</span> <span class="nx">armatureData</span><span class="p">.</span><span class="nx">getBoneData</span><span class="p">(</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">parent</span><span class="p">);</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">parentBoneData</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">boneData</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">global</span><span class="p">);</span>
                            <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">transformPointWithParent</span><span class="p">(</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">transform</span><span class="p">,</span> <span class="nx">parentBoneData</span><span class="p">.</span><span class="nx">global</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">transformArmatureDataAnimations</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">armatureData</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">animationDataList</span> <span class="o">=</span> <span class="nx">armatureData</span><span class="p">.</span><span class="nx">getAnimationDataList</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">animationDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">transformAnimationData</span><span class="p">(</span><span class="nx">animationDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">armatureData</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">transformAnimationData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationData</span><span class="p">,</span> <span class="nx">armatureData</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">skinData</span> <span class="o">=</span> <span class="nx">armatureData</span><span class="p">.</span><span class="nx">getSkinData</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">boneDataList</span> <span class="o">=</span> <span class="nx">armatureData</span><span class="p">.</span><span class="nx">getBoneDataList</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">slotDataList</span> <span class="o">=</span> <span class="nx">skinData</span><span class="p">.</span><span class="nx">getSlotDataList</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">boneDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

                <span class="kd">var</span> <span class="nx">boneData</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">timeline</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">slotData</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">displayData</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">parentTimeline</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">frameList</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">originTransform</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">originPivot</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">prevFrame</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">frame</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">frameListLength</span><span class="p">;</span>

                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">boneData</span> <span class="o">=</span> <span class="nx">boneDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="nx">timeline</span> <span class="o">=</span> <span class="nx">animationData</span><span class="p">.</span><span class="nx">getTimeline</span><span class="p">(</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">timeline</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">continue</span><span class="p">;</span>
                    <span class="p">}</span>

                    <span class="nx">slotData</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">slotIndex</span> <span class="k">in</span> <span class="nx">slotDataList</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">slotData</span> <span class="o">=</span> <span class="nx">slotDataList</span><span class="p">[</span><span class="nx">slotIndex</span><span class="p">];</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">slotData</span><span class="p">.</span><span class="nx">parent</span> <span class="o">==</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">}</span>

                    <span class="nx">parentTimeline</span> <span class="o">=</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">parent</span> <span class="p">?</span> <span class="nx">animationData</span><span class="p">.</span><span class="nx">getTimeline</span><span class="p">(</span><span class="nx">boneData</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>

                    <span class="nx">frameList</span> <span class="o">=</span> <span class="nx">timeline</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">();</span>

                    <span class="nx">originTransform</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                    <span class="nx">originPivot</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                    <span class="nx">prevFrame</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                    <span class="nx">frameListLength</span> <span class="o">=</span> <span class="nx">frameList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">frameListLength</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">frame</span> <span class="o">=</span> <span class="nx">frameList</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">parentTimeline</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">_helpTransform1</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">global</span><span class="p">);</span>

                            <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">getTimelineTransform</span><span class="p">(</span><span class="nx">parentTimeline</span><span class="p">,</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">position</span><span class="p">,</span> <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">_helpTransform2</span><span class="p">);</span>
                            <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">transformPointWithParent</span><span class="p">(</span><span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">_helpTransform1</span><span class="p">,</span> <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">_helpTransform2</span><span class="p">);</span>

                            <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">_helpTransform1</span><span class="p">);</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">global</span><span class="p">);</span>
                        <span class="p">}</span>

                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">-=</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">-=</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">-=</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">;</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">-=</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">;</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">-=</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">-=</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>

                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">timeline</span><span class="p">.</span><span class="nx">transformed</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">slotData</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">frame</span><span class="p">.</span><span class="nx">zOrder</span> <span class="o">-=</span> <span class="nx">slotData</span><span class="p">.</span><span class="nx">zOrder</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>

                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">originTransform</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">originTransform</span> <span class="o">=</span> <span class="nx">timeline</span><span class="p">.</span><span class="nx">originTransform</span><span class="p">;</span>
                            <span class="nx">originTransform</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">);</span>
                            <span class="nx">originTransform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="nx">originTransform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">);</span>
                            <span class="nx">originTransform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="nx">originTransform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">);</span>
                            <span class="nx">originPivot</span> <span class="o">=</span> <span class="nx">timeline</span><span class="p">.</span><span class="nx">originPivot</span><span class="p">;</span>
                            <span class="nx">originPivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                            <span class="nx">originPivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                        <span class="p">}</span>

                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">x</span> <span class="o">-=</span> <span class="nx">originTransform</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">y</span> <span class="o">-=</span> <span class="nx">originTransform</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">-</span> <span class="nx">originTransform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">);</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">-</span> <span class="nx">originTransform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">);</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">-=</span> <span class="nx">originTransform</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">-=</span> <span class="nx">originTransform</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>

                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">timeline</span><span class="p">.</span><span class="nx">transformed</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">frame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">x</span> <span class="o">-=</span> <span class="nx">originPivot</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                            <span class="nx">frame</span><span class="p">.</span><span class="nx">pivot</span><span class="p">.</span><span class="nx">y</span> <span class="o">-=</span> <span class="nx">originPivot</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                        <span class="p">}</span>

                        <span class="k">if</span> <span class="p">(</span><span class="nx">prevFrame</span><span class="p">)</span> <span class="p">{</span>
                            <span class="kd">var</span> <span class="nx">dLX</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">-</span> <span class="nx">prevFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">;</span>

                            <span class="k">if</span> <span class="p">(</span><span class="nx">prevFrame</span><span class="p">.</span><span class="nx">tweenRotate</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">prevFrame</span><span class="p">.</span><span class="nx">tweenRotate</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nx">dLX</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
                                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
                                    <span class="p">}</span>

                                    <span class="k">if</span> <span class="p">(</span><span class="nx">prevFrame</span><span class="p">.</span><span class="nx">tweenRotate</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="nx">prevFrame</span><span class="p">.</span><span class="nx">tweenRotate</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
                                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="nx">prevFrame</span><span class="p">.</span><span class="nx">tweenRotate</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
                                    <span class="p">}</span>
                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nx">dLX</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">-=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
                                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">-=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
                                    <span class="p">}</span>

                                    <span class="k">if</span> <span class="p">(</span><span class="nx">prevFrame</span><span class="p">.</span><span class="nx">tweenRotate</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="nx">prevFrame</span><span class="p">.</span><span class="nx">tweenRotate</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
                                        <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="nx">prevFrame</span><span class="p">.</span><span class="nx">tweenRotate</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
                                    <span class="p">}</span>
                                <span class="p">}</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">prevFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">-</span> <span class="nx">prevFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewX</span><span class="p">);</span>
                                <span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">prevFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">-</span> <span class="nx">prevFrame</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">skewY</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>

                        <span class="nx">prevFrame</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">timeline</span><span class="p">.</span><span class="nx">transformed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">getTimelineTransform</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">timeline</span><span class="p">,</span> <span class="nx">position</span><span class="p">,</span> <span class="nx">retult</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">frameList</span> <span class="o">=</span> <span class="nx">timeline</span><span class="p">.</span><span class="nx">getFrameList</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">frameList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

                <span class="kd">var</span> <span class="nx">currentFrame</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">tweenEasing</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">progress</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">nextFrame</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">currentFrame</span> <span class="o">=</span> <span class="nx">frameList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">currentFrame</span><span class="p">.</span><span class="nx">position</span> <span class="o">&lt;=</span> <span class="nx">position</span> <span class="o">&amp;&amp;</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">position</span> <span class="o">+</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">duration</span> <span class="o">&gt;</span> <span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">tweenEasing</span> <span class="o">=</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">tweenEasing</span><span class="p">;</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">==</span> <span class="nx">frameList</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">||</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">tweenEasing</span><span class="p">)</span> <span class="o">||</span> <span class="nx">position</span> <span class="o">==</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">retult</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">);</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">progress</span> <span class="o">=</span> <span class="p">(</span><span class="nx">position</span> <span class="o">-</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">position</span><span class="p">)</span> <span class="o">/</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">tweenEasing</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">progress</span> <span class="o">=</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">TimelineState</span><span class="p">.</span><span class="nx">getEaseValue</span><span class="p">(</span><span class="nx">progress</span><span class="p">,</span> <span class="nx">tweenEasing</span><span class="p">);</span>
                            <span class="p">}</span>

                            <span class="nx">nextFrame</span> <span class="o">=</span> <span class="nx">frameList</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

                            <span class="nx">retult</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="p">(</span><span class="nx">nextFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                            <span class="nx">retult</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="p">(</span><span class="nx">nextFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                            <span class="nx">retult</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="p">(</span><span class="nx">nextFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">-</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">);</span>
                            <span class="nx">retult</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="nx">TransformUtil</span><span class="p">.</span><span class="nx">formatRadian</span><span class="p">(</span><span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">nextFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">-</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">);</span>
                            <span class="nx">retult</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">+</span> <span class="p">(</span><span class="nx">nextFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">-</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                            <span class="nx">retult</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">nextFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">-</span> <span class="nx">currentFrame</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">;</span>
                        <span class="p">}</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>

            <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">addHideTimeline</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animationData</span><span class="p">,</span> <span class="nx">armatureData</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">boneDataList</span> <span class="o">=</span> <span class="nx">armatureData</span><span class="p">.</span><span class="nx">getBoneDataList</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">boneDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

                <span class="kd">var</span> <span class="nx">boneData</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">boneName</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">boneData</span> <span class="o">=</span> <span class="nx">boneDataList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="nx">boneName</span> <span class="o">=</span> <span class="nx">boneData</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">animationData</span><span class="p">.</span><span class="nx">getTimeline</span><span class="p">(</span><span class="nx">boneName</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">animationData</span><span class="p">.</span><span class="nx">addTimeline</span><span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">TransformTimeline</span><span class="p">.</span><span class="nx">HIDE_TIMELINE</span><span class="p">,</span> <span class="nx">boneName</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">_helpTransform1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">DBTransform</span><span class="p">();</span>
            <span class="nx">DBDataUtil</span><span class="p">.</span><span class="nx">_helpTransform2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">DBTransform</span><span class="p">();</span>
            <span class="k">return</span> <span class="nx">DBDataUtil</span><span class="p">;</span>
        <span class="p">})();</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">DBDataUtil</span> <span class="o">=</span> <span class="nx">DBDataUtil</span><span class="p">;</span>
    <span class="p">})(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">utils</span> <span class="o">||</span> <span class="p">(</span><span class="nx">dragonBones</span><span class="p">.</span><span class="nx">utils</span> <span class="o">=</span> <span class="p">{}));</span>
    <span class="kd">var</span> <span class="nx">utils</span> <span class="o">=</span> <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">utils</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">DBObject</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">function</span> <span class="nx">DBObject</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">global</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">DBTransform</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">origin</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">DBTransform</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">DBTransform</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">tween</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">DBTransform</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">Matrix</span><span class="p">();</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_isColorChanged</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_isDisplayOnStage</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_scaleType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">fixedRotation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">DBObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getVisible</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_visible</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">DBObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setVisible</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_visible</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">DBObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_setParent</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">DBObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_setArmature</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">_removeDBObject</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">armature</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">_addDBObject</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">DBObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">armature</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">global</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">origin</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">tween</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">DBObject</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_update</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">parentMatrix</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">parentMatrix</span><span class="p">.</span><span class="nx">a</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">parentMatrix</span><span class="p">.</span><span class="nx">c</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">parentMatrix</span><span class="p">.</span><span class="nx">tx</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">parentMatrix</span><span class="p">.</span><span class="nx">d</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">parentMatrix</span><span class="p">.</span><span class="nx">b</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">parentMatrix</span><span class="p">.</span><span class="nx">ty</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">fixedRotation</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">skewX</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">skewY</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewX</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewY</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_scaleType</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">*=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleX</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">*=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleY</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">.</span><span class="nx">tx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">.</span><span class="nx">ty</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">skewX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">skewX</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">skewY</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">skewY</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewY</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleX</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewY</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewX</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">scaleY</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">.</span><span class="nx">skewX</span><span class="p">);</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="nx">DBObject</span><span class="p">;</span>
    <span class="p">})();</span>
    <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">DBObject</span> <span class="o">=</span> <span class="nx">DBObject</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">Slot</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">__extends</span><span class="p">(</span><span class="nx">Slot</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
        <span class="kd">function</span> <span class="nx">Slot</span><span class="p">(</span><span class="nx">displayBrideg</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span> <span class="o">=</span> <span class="nx">displayBrideg</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_scaleType</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_originZOrder</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_tweenZorder</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_offsetZOrder</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_isDisplayOnStage</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_isHideDisplay</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getZOrder</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originZOrder</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_tweenZorder</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_offsetZOrder</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setZOrder</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getZOrder</span><span class="p">()</span> <span class="o">!=</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_offsetZOrder</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_originZOrder</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_tweenZorder</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">_slotsZOrderChanged</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getDisplay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">display</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">display</span> <span class="k">instanceof</span> <span class="nx">Armature</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">(</span><span class="nx">display</span><span class="p">).</span><span class="nx">getDisplay</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">display</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setDisplay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_setDisplay</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getChildArmature</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">display</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">display</span> <span class="k">instanceof</span> <span class="nx">Armature</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">display</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setChildArmature</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_setDisplay</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">getDisplay</span><span class="p">());</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getDisplayList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setDisplayList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">displayIndexBackup</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_changeDisplay</span><span class="p">(</span><span class="nx">displayIndexBackup</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_setDisplay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">display</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">getDisplay</span><span class="p">())</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">setDisplay</span><span class="p">(</span><span class="nx">display</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">setDisplay</span><span class="p">(</span><span class="nx">display</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">addDisplay</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">getDisplay</span><span class="p">(),</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">_slotsZOrderChanged</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">updateChildArmatureAnimation</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_isHideDisplay</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">getDisplay</span><span class="p">())</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_isDisplayOnStage</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_isDisplayOnStage</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_changeDisplay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">displayIndex</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">displayIndex</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_isHideDisplay</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_isHideDisplay</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">removeDisplay</span><span class="p">();</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">updateChildArmatureAnimation</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_isHideDisplay</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_isHideDisplay</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">changeShowState</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">addDisplay</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">getDisplay</span><span class="p">(),</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">_slotsZOrderChanged</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">displayIndex</span> <span class="o">&gt;=</span> <span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">displayIndex</span> <span class="o">=</span> <span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span> <span class="o">!=</span> <span class="nx">displayIndex</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span> <span class="o">=</span> <span class="nx">displayIndex</span><span class="p">;</span>

                    <span class="kd">var</span> <span class="nx">display</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">display</span> <span class="k">instanceof</span> <span class="nx">Armature</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_setDisplay</span><span class="p">((</span><span class="nx">display</span><span class="p">).</span><span class="nx">getDisplay</span><span class="p">());</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">_setDisplay</span><span class="p">(</span><span class="nx">display</span><span class="p">);</span>
                    <span class="p">}</span>

                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dislayDataList</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span> <span class="o">&lt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dislayDataList</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dislayDataList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayIndex</span><span class="p">].</span><span class="nx">transform</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">changeShowState</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">updateChildArmatureAnimation</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_isHideDisplay</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">getDisplay</span><span class="p">())</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_isDisplayOnStage</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_isDisplayOnStage</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setVisible</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_visible</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_visible</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_updateVisible</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_visible</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_setArmature</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">_super</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_setArmature</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">_slotsZOrderChanged</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">addDisplay</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">getDisplay</span><span class="p">(),</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">removeDisplay</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">_super</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">dispose</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_displayList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_dislayDataList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_update</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">_super</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_update</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_isDisplayOnStage</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">pivotX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">_tweenPivot</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">pivotY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">_tweenPivot</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">pivotX</span> <span class="o">||</span> <span class="nx">pivotY</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">parentMatrix</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">.</span><span class="nx">tx</span> <span class="o">+=</span> <span class="nx">parentMatrix</span><span class="p">.</span><span class="nx">a</span> <span class="o">*</span> <span class="nx">pivotX</span> <span class="o">+</span> <span class="nx">parentMatrix</span><span class="p">.</span><span class="nx">c</span> <span class="o">*</span> <span class="nx">pivotY</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">.</span><span class="nx">ty</span> <span class="o">+=</span> <span class="nx">parentMatrix</span><span class="p">.</span><span class="nx">b</span> <span class="o">*</span> <span class="nx">pivotX</span> <span class="o">+</span> <span class="nx">parentMatrix</span><span class="p">.</span><span class="nx">d</span> <span class="o">*</span> <span class="nx">pivotY</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">updateTransform</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_globalTransformMatrix</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">global</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_updateVisible</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">setVisible</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">getVisible</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_visible</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">);</span>
        <span class="p">};</span>

        <span class="nx">Slot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateChildArmatureAnimation</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">childArmature</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getChildArmature</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">childArmature</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_isHideDisplay</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">childArmature</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
                    <span class="nx">childArmature</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">_lastAnimationState</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">lastAnimationName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">armature</span> <span class="p">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">getLastAnimationName</span><span class="p">()</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">lastAnimationName</span> <span class="o">&amp;&amp;</span> <span class="nx">childArmature</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">hasAnimation</span><span class="p">(</span><span class="nx">lastAnimationName</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">childArmature</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">gotoAndPlay</span><span class="p">(</span><span class="nx">lastAnimationName</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">childArmature</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="nx">Slot</span><span class="p">;</span>
    <span class="p">})(</span><span class="nx">DBObject</span><span class="p">);</span>
    <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">Slot</span> <span class="o">=</span> <span class="nx">Slot</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">Bone</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">__extends</span><span class="p">(</span><span class="nx">Bone</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
        <span class="kd">function</span> <span class="nx">Bone</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_children</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_scaleType</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_tweenPivot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">geom</span><span class="p">.</span><span class="nx">Point</span><span class="p">();</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">scaleMode</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">Bone</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setVisible</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_visible</span> <span class="o">!=</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_visible</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">child</span> <span class="k">instanceof</span> <span class="nx">Slot</span><span class="p">)</span> <span class="p">{</span>
                        <span class="p">(</span><span class="nx">child</span><span class="p">).</span><span class="nx">_updateVisible</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_visible</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Bone</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_setArmature</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">_super</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_setArmature</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_setArmature</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Bone</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">_super</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_children</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_tweenPivot</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">slot</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Bone</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">child</span> <span class="o">==</span> <span class="k">this</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">ancestor</span> <span class="o">=</span> <span class="nx">child</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">ancestor</span> <span class="o">==</span> <span class="k">this</span> <span class="o">||</span> <span class="nx">ancestor</span> <span class="o">==</span> <span class="kc">null</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">ancestor</span> <span class="o">=</span> <span class="nx">ancestor</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">ancestor</span> <span class="o">==</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Bone</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addChild</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">child</span> <span class="o">==</span> <span class="k">this</span> <span class="o">||</span> <span class="p">(</span><span class="nx">child</span> <span class="k">instanceof</span> <span class="nx">Bone</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">child</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="k">this</span><span class="p">)))</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)"</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">child</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">child</span><span class="p">;</span>
            <span class="nx">child</span><span class="p">.</span><span class="nx">_setParent</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
            <span class="nx">child</span><span class="p">.</span><span class="nx">_setArmature</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">slot</span> <span class="o">&amp;&amp;</span> <span class="nx">child</span> <span class="k">instanceof</span> <span class="nx">Slot</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">slot</span> <span class="o">=</span> <span class="nx">child</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Bone</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeChild</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                <span class="nx">child</span><span class="p">.</span><span class="nx">_setParent</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
                <span class="nx">child</span><span class="p">.</span><span class="nx">_setArmature</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">child</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">slot</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">slot</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Bone</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getSlots</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">slotList</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nx">Slot</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">slotList</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">slotList</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Bone</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_arriveAtFrame</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frame</span><span class="p">,</span> <span class="nx">timelineState</span><span class="p">,</span> <span class="nx">animationState</span><span class="p">,</span> <span class="nx">isCross</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">mixingType</span> <span class="o">=</span> <span class="nx">animationState</span><span class="p">.</span><span class="nx">getMixingTransform</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">animationState</span><span class="p">.</span><span class="nx">displayControl</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">mixingType</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">mixingType</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">displayController</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">displayController</span> <span class="o">==</span> <span class="nx">animationState</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">tansformFrame</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">;</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">slot</span><span class="p">)</span> <span class="p">{</span>
                            <span class="kd">var</span> <span class="nx">displayIndex</span> <span class="o">=</span> <span class="nx">tansformFrame</span><span class="p">.</span><span class="nx">displayIndex</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">displayIndex</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">tansformFrame</span><span class="p">.</span><span class="nx">zOrder</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">tansformFrame</span><span class="p">.</span><span class="nx">zOrder</span> <span class="o">!=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slot</span><span class="p">.</span><span class="nx">_tweenZorder</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">slot</span><span class="p">.</span><span class="nx">_tweenZorder</span> <span class="o">=</span> <span class="nx">tansformFrame</span><span class="p">.</span><span class="nx">zOrder</span><span class="p">;</span>
                                    <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">_slotsZOrderChanged</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">slot</span><span class="p">.</span><span class="nx">_changeDisplay</span><span class="p">(</span><span class="nx">displayIndex</span><span class="p">);</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">slot</span><span class="p">.</span><span class="nx">_updateVisible</span><span class="p">(</span><span class="nx">tansformFrame</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">event</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">FrameEvent</span><span class="p">.</span><span class="nx">BONE_FRAME_EVENT</span><span class="p">))</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">frameEvent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">FrameEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">FrameEvent</span><span class="p">.</span><span class="nx">BONE_FRAME_EVENT</span><span class="p">);</span>
                    <span class="nx">frameEvent</span><span class="p">.</span><span class="nx">bone</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                    <span class="nx">frameEvent</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="nx">animationState</span><span class="p">;</span>
                    <span class="nx">frameEvent</span><span class="p">.</span><span class="nx">frameLabel</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">frameEvent</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">sound</span> <span class="o">&amp;&amp;</span> <span class="nx">Bone</span><span class="p">.</span><span class="nx">_soundManager</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">SoundEvent</span><span class="p">.</span><span class="nx">SOUND</span><span class="p">))</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">soundEvent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">SoundEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">SoundEvent</span><span class="p">.</span><span class="nx">SOUND</span><span class="p">);</span>
                    <span class="nx">soundEvent</span><span class="p">.</span><span class="nx">armature</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">armature</span><span class="p">;</span>
                    <span class="nx">soundEvent</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="nx">animationState</span><span class="p">;</span>
                    <span class="nx">soundEvent</span><span class="p">.</span><span class="nx">sound</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">sound</span><span class="p">;</span>
                    <span class="nx">Bone</span><span class="p">.</span><span class="nx">_soundManager</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">soundEvent</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nx">Slot</span><span class="p">)</span> <span class="p">{</span>
                            <span class="kd">var</span> <span class="nx">childArmature</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_children</span><span class="p">[</span><span class="nx">index</span><span class="p">]).</span><span class="nx">getChildArmature</span><span class="p">();</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">childArmature</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">childArmature</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">gotoAndPlay</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">action</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">slot</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">slot</span><span class="p">.</span><span class="nx">_changeDisplay</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Bone</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_updateColor</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">aOffset</span><span class="p">,</span> <span class="nx">rOffset</span><span class="p">,</span> <span class="nx">gOffset</span><span class="p">,</span> <span class="nx">bOffset</span><span class="p">,</span> <span class="nx">aMultiplier</span><span class="p">,</span> <span class="nx">rMultiplier</span><span class="p">,</span> <span class="nx">gMultiplier</span><span class="p">,</span> <span class="nx">bMultiplier</span><span class="p">,</span> <span class="nx">isColorChanged</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">isColorChanged</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_isColorChanged</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">slot</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">updateColor</span><span class="p">(</span><span class="nx">aOffset</span><span class="p">,</span> <span class="nx">rOffset</span><span class="p">,</span> <span class="nx">gOffset</span><span class="p">,</span> <span class="nx">bOffset</span><span class="p">,</span> <span class="nx">aMultiplier</span><span class="p">,</span> <span class="nx">rMultiplier</span><span class="p">,</span> <span class="nx">gMultiplier</span><span class="p">,</span> <span class="nx">bMultiplier</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_isColorChanged</span> <span class="o">=</span> <span class="nx">isColorChanged</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">Bone</span><span class="p">.</span><span class="nx">_soundManager</span> <span class="o">=</span> <span class="nx">events</span><span class="p">.</span><span class="nx">SoundEventManager</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">Bone</span><span class="p">;</span>
    <span class="p">})(</span><span class="nx">DBObject</span><span class="p">);</span>
    <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">Bone</span> <span class="o">=</span> <span class="nx">Bone</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">Armature</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_super</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">__extends</span><span class="p">(</span><span class="nx">Armature</span><span class="p">,</span> <span class="nx">_super</span><span class="p">);</span>
        <span class="kd">function</span> <span class="nx">Armature</span><span class="p">(</span><span class="nx">display</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">_super</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">animation</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">Animation</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_display</span> <span class="o">=</span> <span class="nx">display</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_slotsZOrderChanged</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_eventList</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">}</span>
        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getDisplay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_display</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">animation</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">dispose</span><span class="p">();</span>

            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dispose</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_eventList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_display</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">animation</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">advanceTime</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">passedTime</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">advanceTime</span><span class="p">(</span><span class="nx">passedTime</span><span class="p">);</span>
            <span class="nx">passedTime</span> <span class="o">*=</span> <span class="k">this</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">timeScale</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_update</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">slot</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">slot</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="nx">slot</span><span class="p">.</span><span class="nx">_update</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">slot</span><span class="p">.</span><span class="nx">_isDisplayOnStage</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">childArmature</span> <span class="o">=</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">getChildArmature</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">childArmature</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">childArmature</span><span class="p">.</span><span class="nx">advanceTime</span><span class="p">(</span><span class="nx">passedTime</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_slotsZOrderChanged</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">updateSlotsZOrder</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">ArmatureEvent</span><span class="p">.</span><span class="nx">Z_ORDER_UPDATED</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">ArmatureEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">ArmatureEvent</span><span class="p">.</span><span class="nx">Z_ORDER_UPDATED</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
                <span class="p">}</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getSlots</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnCopy</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">returnCopy</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">returnCopy</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">return</span> <span class="nx">returnCopy</span> <span class="p">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">concat</span><span class="p">()</span> <span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBones</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnCopy</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">returnCopy</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">returnCopy</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">return</span> <span class="nx">returnCopy</span> <span class="p">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">concat</span><span class="p">()</span> <span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getSlot</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getSlotByDisplay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">display</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">display</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getDisplay</span><span class="p">()</span> <span class="o">==</span> <span class="nx">display</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeSlot</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slot</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">slot</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">slot</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">slot</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">slot</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeSlotByName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">slotName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="kd">var</span> <span class="nx">slot</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSlot</span><span class="p">(</span><span class="nx">slotName</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">slot</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">removeSlot</span><span class="p">(</span><span class="nx">slot</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBone</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">boneName</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">boneName</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBoneByDisplay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">display</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">slot</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSlotByDisplay</span><span class="p">(</span><span class="nx">display</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">slot</span> <span class="p">?</span> <span class="nx">slot</span><span class="p">.</span><span class="nx">parent</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeBone</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">bone</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">bone</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">bone</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">bone</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">bone</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">bone</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">bone</span><span class="p">.</span><span class="nx">_setArmature</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeBoneByName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">boneName</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">boneName</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="kd">var</span> <span class="nx">bone</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getBone</span><span class="p">(</span><span class="nx">boneName</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">bone</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">removeBone</span><span class="p">(</span><span class="nx">bone</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addChild</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">parentName</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">boneParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getBone</span><span class="p">(</span><span class="nx">parentName</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">boneParent</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">boneParent</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">object</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">object</span><span class="p">.</span><span class="nx">_setArmature</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">updateSlotsZOrder</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sortSlot</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">slot</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">slot</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">slot</span><span class="p">.</span><span class="nx">_isDisplayOnStage</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">slot</span><span class="p">.</span><span class="nx">_displayBridge</span><span class="p">.</span><span class="nx">addDisplay</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_display</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_slotsZOrderChanged</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_addDBObject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">object</span> <span class="k">instanceof</span> <span class="nx">Slot</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">slot</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">slot</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">slot</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">object</span> <span class="k">instanceof</span> <span class="nx">Bone</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">bone</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">bone</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_sortBoneList</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_removeDBObject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">object</span> <span class="k">instanceof</span> <span class="nx">Slot</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">slot</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">slot</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_slotList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">object</span> <span class="k">instanceof</span> <span class="nx">Bone</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">bone</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>
                <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">bone</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_sortBoneList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">helpArray</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="kd">var</span> <span class="nx">level</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">bone</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">boneParent</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nx">bone</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="nx">boneParent</span> <span class="o">=</span> <span class="nx">bone</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">boneParent</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">level</span><span class="o">++</span><span class="p">;</span>
                    <span class="nx">boneParent</span> <span class="o">=</span> <span class="nx">boneParent</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">helpArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="na">level</span><span class="p">:</span> <span class="nx">level</span><span class="p">,</span> <span class="na">bone</span><span class="p">:</span> <span class="nx">bone</span> <span class="p">};</span>
            <span class="p">}</span>

            <span class="nx">helpArray</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sortBone</span><span class="p">);</span>

            <span class="nx">i</span> <span class="o">=</span> <span class="nx">helpArray</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_boneList</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">helpArray</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">bone</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_arriveAtFrame</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">frame</span><span class="p">,</span> <span class="nx">timelineState</span><span class="p">,</span> <span class="nx">animationState</span><span class="p">,</span> <span class="nx">isCross</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">event</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">FrameEvent</span><span class="p">.</span><span class="nx">ANIMATION_FRAME_EVENT</span><span class="p">))</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">frameEvent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">FrameEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">FrameEvent</span><span class="p">.</span><span class="nx">ANIMATION_FRAME_EVENT</span><span class="p">);</span>
                <span class="nx">frameEvent</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="nx">animationState</span><span class="p">;</span>
                <span class="nx">frameEvent</span><span class="p">.</span><span class="nx">frameLabel</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_eventList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">frameEvent</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">sound</span> <span class="o">&amp;&amp;</span> <span class="nx">Armature</span><span class="p">.</span><span class="nx">_soundManager</span><span class="p">.</span><span class="nx">hasEventListener</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">SoundEvent</span><span class="p">.</span><span class="nx">SOUND</span><span class="p">))</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">soundEvent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">events</span><span class="p">.</span><span class="nx">SoundEvent</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">SoundEvent</span><span class="p">.</span><span class="nx">SOUND</span><span class="p">);</span>
                <span class="nx">soundEvent</span><span class="p">.</span><span class="nx">armature</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                <span class="nx">soundEvent</span><span class="p">.</span><span class="nx">animationState</span> <span class="o">=</span> <span class="nx">animationState</span><span class="p">;</span>
                <span class="nx">soundEvent</span><span class="p">.</span><span class="nx">sound</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">sound</span><span class="p">;</span>
                <span class="nx">Armature</span><span class="p">.</span><span class="nx">_soundManager</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">soundEvent</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">animationState</span><span class="p">.</span><span class="nx">isPlaying</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">gotoAndPlay</span><span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">action</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sortSlot</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slot1</span><span class="p">,</span> <span class="nx">slot2</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">slot1</span><span class="p">.</span><span class="nx">getZOrder</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nx">slot2</span><span class="p">.</span><span class="nx">getZOrder</span><span class="p">()</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">Armature</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sortBone</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">object1</span><span class="p">,</span> <span class="nx">object2</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">object1</span><span class="p">.</span><span class="nx">level</span> <span class="o">&lt;</span> <span class="nx">object2</span><span class="p">.</span><span class="nx">level</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">Armature</span><span class="p">.</span><span class="nx">_soundManager</span> <span class="o">=</span> <span class="nx">events</span><span class="p">.</span><span class="nx">SoundEventManager</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">Armature</span><span class="p">;</span>
    <span class="p">})(</span><span class="nx">events</span><span class="p">.</span><span class="nx">EventDispatcher</span><span class="p">);</span>
    <span class="nx">dragonBones</span><span class="p">.</span><span class="nx">Armature</span> <span class="o">=</span> <span class="nx">Armature</span><span class="p">;</span>
<span class="p">})(</span><span class="nx">dragonBones</span> <span class="o">||</span> <span class="p">(</span><span class="nx">dragonBones</span> <span class="o">=</span> <span class="p">{}));</span>
</code></pre>
<meta content="../" name="loadPath">
<footer class="footer">
  <p><a href="https://github.com/samme/phaser-examples-mirror">phaser-examples-mirror</a> from <a href="https://github.com/photonstorm/phaser-examples">photonstorm/phaser-examples</a> (<a href="http://opensource.org/licenses/MIT">MIT License</a>).</p>
  
  <p>This license does <strong>not</strong> cover the graphics or audio files herein. None of them are to be used in commercial games.</p>
  
</footer>
<script src="../js/bower_components/phaser-ce/build/phaser.js?1505580292"></script>
<script>
  this.loadPath = "../";
</script>
<script src="../js/bower_components/phaser-examples/examples/animation/dragonBones.js?1505580292"></script>
<script src="../js/example.js?1505580292"></script>